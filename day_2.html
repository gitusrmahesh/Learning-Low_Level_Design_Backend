<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 2: Constructors, Static Members & Object Lifecycle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .problem-tag { font-size: 0.75rem; font-weight: 600; padding: 0.125rem 0.5rem; border-radius: 9999px; display: inline-block; }
        .code-block { background-color: #1e293b; color: #e2e8f0; padding: 1rem; border-radius: 0.5rem; font-family: monospace; font-size: 0.875rem; overflow-x: auto; position: relative; }
        .code-block .keyword { color: #93c5fd; }
        .code-block .type { color: #86efac; }
        .code-block .comment { color: #9ca3af; }
        .code-block .string { color: #fcd34d; }
        .copy-button { position: absolute; top: 0.5rem; right: 0.5rem; background-color: #334155; color: #9ca3af; border: none; padding: 0.25rem 0.5rem; border-radius: 0.25rem; cursor: pointer; font-size: 0.75rem; }
        .copy-button:hover { background-color: #475569; }
        .answer-toggle { cursor: pointer; color: #0d9488; font-weight: 600; }
        .answer-content { display: none; }
    </style>
</head>
<body class="antialiased">
    <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-10">
            <h2 id="greeting" class="text-xl text-slate-500">Good Evening!</h2>
            <h1 class="text-4xl sm:text-5xl font-extrabold text-slate-800 mt-1 tracking-tight">Low-Level Design Bootcamp</h1>
            <p class="mt-3 text-slate-500 max-w-xl mx-auto">Your 60-Day Interactive Roadmap to Mastering Backend Engineering.</p>
        </header>
        
        <main class="max-w-6xl mx-auto">
            <div class="mb-8">
                <a href="roadmap.html" class="text-teal-600 hover:text-teal-800 font-semibold transition-colors duration-200 inline-flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Back to Roadmap
                </a>
                <h1 class="text-4xl font-extrabold text-slate-800 mt-4 tracking-tight">Day 2: Constructors, Static Members & Object Lifecycle</h1>
                <p class="mt-2 text-lg text-slate-500">Week 1: OOP Foundations</p>
            </div>
            
            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Main Content -->
                <div class="w-full lg:w-3/4 space-y-8">
                     <section id="theory" class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                        <h2 class="font-bold text-xl text-slate-700 mb-4 border-b pb-2 flex items-center gap-2">&#128218; Theory Topics</h2>
                        <div class="space-y-6 pt-2 text-slate-700">
                           <div>
                                <h3 class="font-semibold text-lg">1. Constructors</h3>
                                <p class="mt-1">A constructor is a special method called automatically when an object is created (`instantiated`). Its primary job is to initialize the object's data members to valid, starting states. Without a constructor, an object's fields would have default values (e.g., `0` for numbers, `null` for objects), which might not be desirable.</p>
                                <div class="mt-4 bg-sky-50 border-l-4 border-sky-400 p-4 rounded-r-lg">
                                    <p class="font-bold">Key Point:</p>
                                    <p class="text-sm">If you don't provide any constructor, the C# compiler provides a public, parameterless one for you. However, as soon as you define any constructor, this default one is no longer automatically provided.</p>
                                </div>
                                <h4 class="font-semibold mt-4">Types of Constructors:</h4>
                                <ul class="list-disc list-inside mt-2 space-y-2">
                                    <li>**Default (Parameterless) Constructor:** Takes no arguments. Used for creating an object with a default state.</li>
                                    <li>**Parameterized Constructor:** Takes one or more arguments to initialize the object with specific values provided at creation time.</li>
                                    <li>**Copy Constructor:** Takes another object of the same class as an argument and creates a new object by copying the values from the existing one.</li>
                                     <li>**Static Constructor:** Used to initialize `static` data members of the class. It is called only once, before the first instance is created or any static members are referenced. It has no access modifiers and is parameterless.</li>
                                </ul>
                           </div>
                           <div>
                                <h3 class="font-semibold text-lg">2. Static Members</h3>
                               <p class="mt-1">Static members (fields, properties, methods) belong to the **class itself**, not to an instance of the class. This means there's only one copy of a static member, which is shared among all objects of that class.</p>
                               <h4 class="font-semibold mt-4">When to Use Static vs. Instance Members:</h4>
                                <table class="w-full text-left border-collapse mt-2">
                                    <thead><tr class="bg-slate-100"><th class="border p-2">Member Type</th><th class="border p-2">Belongs To</th><th class="border p-2">Use Case</th></tr></thead>
                                    <tbody>
                                        <tr><td class="border p-2 font-semibold">Instance</td><td class="border p-2">An object (instance)</td><td class="border p-2">Data that is unique to each object (e.g., a `Car` object's `Color`).</td></tr>
                                        <tr><td class="border p-2 font-semibold">Static</td><td class="border p-2">The class</td><td class="border p-2">Data or functionality shared by all objects (e.g., `Car.NumberOfWheels = 4`) or utility methods that don't depend on an object's state (e.g., `Math.Max()`).</td></tr>
                                    </tbody>
                                </table>
                           </div>
                           <div>
                                <h3 class="font-semibold text-lg">3. Object Lifecycle</h3>
                                <p class="mt-1">The .NET runtime (CLR) manages the memory for your application. The lifecycle of an object is simple:</p>
                                <ol class="list-decimal list-inside mt-2 space-y-1">
                                    <li>**Creation:** Memory is allocated on the heap when you use the `new` keyword, and the constructor is called.</li>
                                    <li>**Usage:** Your application uses the object, calling its methods and accessing its properties.</li>
                                    <li>**Destruction:** When an object is no longer referenced by any part of your application, it becomes eligible for garbage collection. The **Garbage Collector (GC)** is a background process that periodically reclaims the memory from these unreferenced objects. You don't manually destroy objects in C#.</li>
                                </ol>
                           </div>
                        </div>
                    </section>
                     <section id="practice" class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                        <h2 class="font-bold text-xl text-slate-700 mb-4 border-b pb-2 flex items-center gap-2">&#128187; Coding Practice</h2>
                        <div class="space-y-6 pt-2">
                            <div>
                                <p class="text-slate-600 mb-4 font-semibold">1. Create a Logger class with a static instance (Singleton approach).</p>
                                <div class="code-block" id="code-practice-1">
                                    <button class="copy-button" onclick="copyCode('code-practice-1')">Copy</button>
<pre><code><span class="keyword">using</span> System;

<span class="keyword">public</span> <span class="keyword">class</span> <span class="type">Logger</span>
{
    <span class="comment">// A private static instance of the Logger itself</span>
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Logger</span> _instance;
    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="type">object</span> _lock = <span class="keyword">new</span> <span class="type">object</span>();

    <span class="comment">// Private constructor prevents direct instantiation</span>
    <span class="keyword">private</span> <span class="type">Logger</span>() { }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">Logger</span> GetInstance()
    {
        <span class="keyword">if</span> (_instance == <span class="keyword">null</span>)
        {
            <span class="keyword">lock</span>(_lock) <span class="comment">// Thread-safe singleton</span>
            {
                <span class="keyword">if</span> (_instance == <span class="keyword">null</span>)
                {
                     _instance = <span class="keyword">new</span> <span class="type">Logger</span>();
                }
            }
        }
        <span class="keyword">return</span> _instance;
    }
    <span class="keyword">public</span> <span class="keyword">void</span> Log(<span class="type">string</span> message) => Console.WriteLine($<span class="string">"[{DateTime.Now}]: {message}"</span>);
}</code></pre>
                                </div>
                            </div>
                            <div>
                                <p class="text-slate-600 mb-4 font-semibold">2. Write a program to count the number of active objects using a static counter.</p>
                                 <div class="code-block" id="code-practice-2">
                                    <button class="copy-button" onclick="copyCode('code-practice-2')">Copy</button>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> <span class="type">User</span>
{
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> ActiveUsers { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }

    <span class="keyword">public</span> <span class="type">User</span>()
    {
        ActiveUsers++; <span class="comment">// Increment on creation</span>
    }

    <span class="comment">// In a real app, you would call a Dispose or similar method to decrement.</span>
    <span class="comment">// For this example, we'll simulate it.</span>
     <span class="keyword">public</span> <span class="keyword">void</span> Logout()
    {
        ActiveUsers--;
    }
}

<span class="comment">// Usage:</span>
<span class="type">var</span> user1 = <span class="keyword">new</span> <span class="type">User</span>();
<span class="type">var</span> user2 = <span class="keyword">new</span> <span class="type">User</span>();
Console.WriteLine($<span class="string">"Active users: {User.ActiveUsers}"</span>); <span class="comment">// Output: 2</span>
user1.Logout();
Console.WriteLine($<span class="string">"Active users: {User.ActiveUsers}"</span>); <span class="comment">// Output: 1</span>
</code></pre>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="problems" class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                        <h2 class="font-bold text-xl text-slate-700 mb-4 border-b pb-2 flex items-center gap-2">&#128221; Problems & Solutions</h2>
                        <div class="pt-2 space-y-6">
                           <div>
                                <div class="flex items-start mb-2"><span class="problem-tag mr-3 bg-green-100 text-green-700">Easy</span><p class="text-slate-600 flex-1 font-semibold">Implement a basic `Calculator` class that is initialized with a starting value via a constructor.</p></div>
                                <div class="code-block" id="code-problem-1">
                                    <button class="copy-button" onclick="copyCode('code-problem-1')">Copy</button>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> <span class="type">Calculator</span>
{
    <span class="keyword">public</span> <span class="type">double</span> CurrentValue { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }

    <span class="comment">// Parameterized constructor</span>
    <span class="keyword">public</span> <span class="type">Calculator</span>(<span class="type">double</span> startValue)
    {
        CurrentValue = startValue;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> Add(<span class="type">double</span> number) => CurrentValue += number;
    <span class="keyword">public</span> <span class="keyword">void</span> Subtract(<span class="type">double</span> number) => CurrentValue -= number;
}</code></pre>
                                </div>
                            </div>
                             <div>
                                <div class="flex items-start mb-2"><span class="problem-tag mr-3 bg-yellow-100 text-yellow-700">Medium</span><p class="text-slate-600 flex-1 font-semibold">Implement a Circular Queue (as seen in Day 1), but add a `static` factory method `CreateWithInitialItems` that returns a pre-filled queue.</p></div>
                                <div class="code-block" id="code-problem-2">
                                    <button class="copy-button" onclick="copyCode('code-problem-2')">Copy</button>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> <span class="type">CircularQueueWithFactory</span>
{
    <span class="keyword">private</span> <span class="type">int</span>[] _items;
    <span class="comment">// ... (head, tail, count fields) ...</span>

    <span class="keyword">private</span> <span class="type">CircularQueueWithFactory</span>(<span class="type">int</span> capacity)
    {
        _items = <span class="keyword">new</span> <span class="type">int</span>[capacity];
    }
    
    <span class="comment">// Static factory method</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">CircularQueueWithFactory</span> CreateWithInitialItems(<span class="type">int</span>[] initialItems)
    {
        <span class="type">var</span> queue = <span class="keyword">new</span> <span class="type">CircularQueueWithFactory</span>(initialItems.Length);
        <span class="keyword">foreach</span>(<span class="keyword">var</span> item <span class="keyword">in</span> initialItems)
        {
            queue.Enqueue(item);
        }
        <span class="keyword">return</span> queue;
    }

    <span class="comment">// ... (Enqueue, Dequeue, Count methods) ...</span>
}</code></pre>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="uml" class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                        <h2 class="font-bold text-xl text-slate-700 mb-4 border-b pb-2 flex items-center gap-2">&#128443; UML / Schema Task</h2>
                        <p class="text-slate-600 pt-1 mb-2 font-semibold">UML object lifecycle diagram for the `Logger`.</p>
                        <p class="text-slate-600 mb-4">This diagram illustrates the state transitions and key moments in the life of the Singleton Logger instance.</p>
                        <div class="code-block">
<pre><code>StateDiagram
    [*] --> NotCreated : Application Starts

    state NotCreated {
        GetInstance() --> Created : First call
    }

    state Created {
        GetInstance() --> Created : Subsequent calls (returns existing instance)
        Log() --> Created : Logging messages
    }

    Created --> [*] : Application Ends / GC
</code></pre>
                        </div>
                         <p class="text-slate-600 mt-4">**Explanation:** The diagram starts at `[*]`. The `Logger` instance is in the `NotCreated` state until `GetInstance()` is called for the first time. This call transitions it to the `Created` state. Any subsequent calls to `GetInstance()` or `Log()` keep it in the `Created` state. The instance only ceases to exist when the application terminates.</p>
                    </section>
                    <section id="casestudy" class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                         <h2 class="font-bold text-xl text-slate-700 mb-4 border-b pb-2 flex items-center gap-2">&#128193; Case Study Analysis</h2>
                         <div class="pt-2 space-y-4">
                            <div>
                                <p class="font-semibold text-slate-700 text-lg">Design Parking Lot System</p>
                                <p class="text-slate-600">This system needs to manage parking spots of different sizes, handle vehicle entry/exit, and issue tickets.</p>
                             </div>
                             <div>
                                <h3 class="font-semibold">Entities & Classes</h3>
                                 <ul class="list-disc list-inside space-y-1 text-slate-600">
                                     <li>`ParkingLot`: The main class, possibly a Singleton, that manages floors and spots.</li>
                                     <li>`Floor`: Contains rows of parking spots.</li>
                                     <li>`ParkingSpot`: Has a `SpotSize` (e.g., Small, Medium, Large) and an `IsOccupied` status.</li>
                                     <li>`Vehicle`: An abstract base class with subclasses like `Motorcycle`, `Car`, `Truck`.</li>
                                      <li>`Ticket`: Contains `Vehicle` details, `ParkingSpot` number, entry time, and exit time.</li>
                                 </ul>
                             </div>
                             <div>
                                <h3 class="font-semibold">Core Logic (Sequence)</h3>
                                <ol class="list-decimal list-inside space-y-1 text-slate-600">
                                     <li>A `Vehicle` arrives.</li>
                                     <li>The `ParkingLot` system checks for the smallest available `ParkingSpot` that fits the vehicle (e.g., a car can fit in a medium or large spot, but medium is preferred).</li>
                                     <li>If a spot is found, it's marked as occupied.</li>
                                     <li>A `Ticket` is created with the vehicle info, spot number, and entry time.</li>
                                     <li>On exit, the ticket is processed, a fee is calculated, and the `ParkingSpot` is marked as available.</li>
                                 </ol>
                             </div>
                         </div>
                    </section>
                     <section id="quiz" class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                        <h2 class="font-bold text-xl text-slate-700 mb-4 border-b pb-2 flex items-center gap-2">&#10067; Knowledge Check</h2>
                        <div id="quiz-container" class="pt-2 space-y-4"></div>
                        <button id="submit-quiz" class="mt-4 bg-teal-600 text-white font-semibold px-4 py-2 rounded-md hover:bg-teal-700 transition-colors">Submit Answers</button>
                        <div id="quiz-results" class="mt-4 font-semibold"></div>
                    </section>
                     <section id="assessment" class="bg-white p-6 rounded-xl shadow-md border border-slate-200/80">
                        <h2 class="font-bold text-xl text-slate-700 mb-4 border-b pb-2 flex items-center gap-2">&#127919; Self-Assessment Challenge</h2>
                         <div class="pt-2 space-y-4">
                            <p class="text-slate-600">Design a `Game` class. It should have a `static` property to track the `TotalGamesPlayed` across all instances. Each `Game` instance should have properties for `Player1Name` and `Player2Name`, set via a constructor. Include a method `PlayGame()` that increments the static counter.</p>
                             <p class="answer-toggle" onclick="toggleAnswer(this)">Show Solution</p>
                             <div class="answer-content">
                                <div class="code-block" id="assessment-solution">
                                    <button class="copy-button" onclick="copyCode('assessment-solution')">Copy</button>
<pre><code><span class="keyword">public</span> <span class="keyword">class</span> <span class="type">Game</span>
{
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> TotalGamesPlayed { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }

    <span class="keyword">public</span> <span class="type">string</span> Player1Name { <span class="keyword">get</span>; }
    <span class="keyword">public</span> <span class="type">string</span> Player2Name { <span class="keyword">get</span>; }

    <span class="keyword">static</span> <span class="type">Game</span>() <span class="comment">// Static constructor</span>
    {
        TotalGamesPlayed = 0;
    }

    <span class="keyword">public</span> <span class="type">Game</span>(<span class="type">string</span> player1, <span class="type">string</span> player2)
    {
        Player1Name = player1;
        Player2Name = player2;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> PlayGame()
    {
        <span class="comment">// Simulate game logic...</span>
        Console.WriteLine($<span class="string">"{Player1Name} is playing against {Player2Name}"</span>);
        TotalGamesPlayed++;
        Console.WriteLine(<span class="string">"Game finished!"</span>);
    }
}
</code></pre>
                                </div>
                             </div>
                         </div>
                    </section>
                </div>

                <!-- Table of Contents -->
                <aside class="w-full lg:w-1/4 lg:sticky top-8 self-start">
                     <div class="bg-white p-4 rounded-xl shadow-md border border-slate-200/80">
                         <h3 class="font-semibold mb-3 border-b pb-2">On This Page</h3>
                         <nav>
                             <ul class="space-y-2 text-sm text-slate-600">
                                 <li><a href="#theory" class="hover:text-teal-600">1. Theory Topics</a></li>
                                 <li><a href="#practice" class="hover:text-teal-600">2. Coding Practice</a></li>
                                 <li><a href="#problems" class="hover:text-teal-600">3. Problems & Solutions</a></li>
                                 <li><a href="#uml" class="hover:text-teal-600">4. UML / Schema Task</a></li>
                                 <li><a href="#casestudy" class="hover:text-teal-600">5. Case Study Analysis</a></li>
                                 <li><a href="#quiz" class="hover:text-teal-600">6. Knowledge Check</a></li>
                                 <li><a href="#assessment" class="hover:text-teal-600">7. Self-Assessment</a></li>
                             </ul>
                         </nav>
                     </div>
                </aside>
            </div>
        </main>
         <footer class="text-center mt-16 py-8 border-t border-slate-200">
            <p class="text-slate-700 font-semibold">Low-Level Design Bootcamp</p>
            <p class="text-sm text-slate-500 mt-2">A personalized learning roadmap curated by Mr. Mahesh Singare.</p>
            <p class="text-xs text-slate-400 mt-4">&copy; 2025. All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        function toggleAnswer(element) {
            const answer = element.nextElementSibling;
            if (answer.style.display === "block") {
                answer.style.display = "none";
                element.textContent = "Show Solution";
            } else {
                answer.style.display = "block";
                element.textContent = "Hide Solution";
            }
        }

        function copyCode(elementId) {
            const code = document.getElementById(elementId).querySelector('pre').innerText;
            navigator.clipboard.writeText(code).then(() => {
                const button = document.getElementById(elementId).querySelector('.copy-button');
                button.textContent = 'Copied!';
                setTimeout(() => { button.textContent = 'Copy'; }, 2000);
            });
        }
        
        const quizData = [
            { question: "When is a static constructor called?", options: ["Every time an object is created.", "Only once, before the first instance is created or any static member is referenced.", "When the Garbage Collector cleans up the class.", "It must be called manually."], answer: "Only once, before the first instance is created or any static member is referenced." },
            { question: "If a class has a `public static int Counter`, how would you access it?", options: ["myObject.Counter", "this.Counter", "MyClass.Counter", "It cannot be accessed from outside the class."], answer: "MyClass.Counter" },
            { question: "What is the primary role of a parameterized constructor?", options: ["To create an object with a default state.", "To provide a way to create a copy of an existing object.", "To initialize an object with specific values at the time of creation.", "To initialize static members of a class."], answer: "To initialize an object with specific values at the time of creation." }
        ];

        const quizContainer = document.getElementById('quiz-container');
        quizData.forEach((q, index) => {
            const questionEl = document.createElement('div');
            questionEl.className = 'quiz-question border-b border-slate-200 pb-4';
            let optionsHTML = q.options.map(option => `
                <label class="flex items-center space-x-2 p-2 rounded-md hover:bg-slate-50">
                    <input type="radio" name="question${index}" value="${option}" class="text-teal-600 focus:ring-teal-500">
                    <span>${option}</span>
                </label>`).join('');
            questionEl.innerHTML = `<p class="font-semibold mb-2">${index + 1}. ${q.question}</p><div class="space-y-1">${optionsHTML}</div><div id="answer-feedback-${index}" class="mt-2 text-sm"></div>`;
            quizContainer.appendChild(questionEl);
        });
        
        document.getElementById('submit-quiz').addEventListener('click', () => {
            let score = 0;
            quizData.forEach((q, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                const feedbackEl = document.getElementById(`answer-feedback-${index}`);
                feedbackEl.innerHTML = ''; 
                if (selected) {
                    if (selected.value === q.answer) {
                        score++;
                        feedbackEl.innerHTML = `<p class="text-green-600 font-semibold">Correct!</p>`;
                    } else {
                         feedbackEl.innerHTML = `<p class="text-red-600 font-semibold">Incorrect.</p> <button class="answer-toggle text-xs" onclick="this.nextElementSibling.style.display='block'">Show Correct Answer</button><p class="answer-content text-slate-600 mt-1">The correct answer is: ${q.answer}</p>`;
                    }
                } else {
                    feedbackEl.innerHTML = `<p class="text-amber-600 font-semibold">Not answered.</p>`;
                }
            });
            document.getElementById('quiz-results').innerHTML = `Your score: <span class="text-2xl font-bold ${score / quizData.length >= 0.75 ? 'text-green-600' : 'text-red-600'}">${score}</span> out of ${quizData.length}`;
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            const greetingEl = document.getElementById('greeting');
            const hour = new Date().getHours();
            if (hour < 12) greetingEl.textContent = "Good Morning!";
            else if (hour < 18) greetingEl.textContent = "Good Afternoon!";
            else greetingEl.textContent = "Good Evening!";
        });
    </script>
</body>
</html>

