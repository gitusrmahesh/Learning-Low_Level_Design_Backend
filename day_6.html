<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 6: Interfaces & Partial Classes - OOP Foundations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFFFF;
            color: #3D352E;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
        }
        pre {
            background-color: #1E1E1E;
            color: #D4D4D4;
            font-family: 'Roboto Mono', monospace;
            border-radius: 0.5rem;
            padding: 1.25rem;
            position: relative;
            overflow-x: auto;
            border: 1px solid #3a404a;
        }
        pre code {
            background-color: transparent !important;
            color: inherit;
            padding: 0;
            font-size: inherit;
            border-radius: 0;
        }
        .prose-custom :not(pre) > code {
            background-color: #F3F4F6;
            color: #C06A47;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
        }
        .btn {
            display: inline-block;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            text-align: center;
        }
        .btn-primary {
            background-color: #C06A47; /* Sienna */
            color: #FFFFFF;
            border: 1px solid transparent;
        }
        .btn-primary:hover {
            background-color: #A95A3A; /* Darker Sienna */
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #4A5568;
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            opacity: 0;
            transition: all 0.2s;
        }
        pre:hover .copy-btn {
            opacity: 1;
        }
        .copy-btn:hover {
            background-color: #2D3748;
        }
        .toc-link {
            transition: all 0.2s ease-in-out;
            border-left: 2px solid transparent;
        }
        .toc-link:hover {
            color: #3E8A86; /* Teal */
            border-left-color: #3E8A86;
        }
        .toc-link.active {
            color: #C06A47; /* Sienna */
            border-left-color: #C06A47;
            font-weight: 700;
        }
        .prose-custom { max-width: 80ch; }
        .prose-custom h2 { margin-top: 2.5em; margin-bottom: 1em; }
        .prose-custom h3 { margin-top: 2em; margin-bottom: 0.8em; }
        .prose-custom p, .prose-custom ul, .prose-custom ol { line-height: 1.7; }
        .shadow-sm { box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .bg-white { background-color: #FFFFFF; }
        .border, .border-t { border-color: #e5e7eb; }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white shadow-md fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-3">
                <div class="text-2xl font-bold text-sienna-800">
                    <a href="roadmap.html">OOP Foundations</a>
                </div>
                <nav class="hidden md:flex space-x-4">
                    <a href="day_1.html" class="text-gray-600 hover:text-teal-600 transition">Day 1</a>
                    <a href="day_2.html" class="text-gray-600 hover:text-teal-600 transition">Day 2</a>
                    <a href="day_3.html" class="text-gray-600 hover:text-teal-600 transition">Day 3</a>
                    <a href="day_4.html" class="text-gray-600 hover:text-teal-600 transition">Day 4</a>
                    <a href="day_5.html" class="text-gray-600 hover:text-teal-600 transition">Day 5</a>
                    <a href="day_6.html" class="font-bold text-teal-600">Day 6</a>
                    <a href="day_7.html" class="text-gray-600 hover:text-teal-600 transition">Day 7</a>
                </nav>
                <!-- Return to Homepage button removed from here -->
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 pt-24">
        <div class="flex justify-between items-center mb-12">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-sienna-800">Day 6: Interfaces & Partial Classes</h1>
                <p class="mt-4 text-xl text-gray-600">Exploring contracts and code organization in C# for building flexible and maintainable systems.</p>
            </div>
            <a href="roadmap.html" class="btn btn-primary whitespace-nowrap">Return to Homepage</a>
        </div>

        <div class="flex flex-col lg:flex-row-reverse lg:space-x-reverse lg:space-x-12">
            <aside class="w-full lg:w-1/4 lg:sticky lg:top-24 self-start mb-12 lg:mb-0">
                <div class="p-4 rounded-lg bg-white shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4">On This Page</h3>
                    <nav id="toc-nav" class="flex flex-col space-y-2">
                        <a href="#theory" class="toc-link pl-2 text-gray-600">Theory Topics</a>
                        <a href="#coding-practice" class="toc-link pl-2 text-gray-600">Coding Practice</a>
                        <a href="#uml-task" class="toc-link pl-2 text-gray-600">UML/Schema Task</a>
                        <a href="#case-study" class="toc-link pl-2 text-gray-600">Case Study</a>
                        <a href="#knowledge-check" class="toc-link pl-2 text-gray-600">Knowledge Check</a>
                        <a href="#self-assessment" class="toc-link pl-2 text-gray-600">Self-Assessment Challenge</a>
                    </nav>
                </div>
            </aside>

            <div class="w-full lg:w-3/4 prose-custom">
                 <section id="theory" class="scroll-mt-20">
                    <h2 class="text-3xl font-bold border-b pb-2">✅ Theory Topics</h2>
                    <p>Today, we dive into two powerful C# features that promote flexible and maintainable code: Interfaces and Partial Classes. Interfaces define contracts that classes must adhere to, enabling polymorphism and decoupling. Partial classes allow a single class definition to be split across multiple files, which is invaluable for code organization and working with auto-generated code.</p>

                    <h3 class="text-2xl font-semibold">1. Interfaces in C#</h3>
                    <p>Think of an interface as a <strong>contract</strong> or a <strong>blueprint</strong> for a class. It defines a set of public members (methods, properties, events, indexers) that a class or struct must implement. It doesn't provide any implementation itself—it only specifies the "what," not the "how."</p>
                    
                    <div class="callout">
                        <p class="font-bold">Analogy: The Wall Socket</p>
                        <p>A wall socket is an interface. It guarantees a specific shape and a standard voltage. Any appliance manufacturer (a class) can create a plug (an implementation) that fits this socket. The socket doesn't care if it's a toaster or a laptop; as long as the plug conforms to the standard, it will work. This allows for incredible flexibility and interoperability.</p>
                    </div>

                    <h4 class="text-xl font-semibold mt-6">Why Use Interfaces?</h4>
                    <ul>
                        <li><strong>Multiple Inheritance:</strong> C# doesn't allow a class to inherit from more than one base class. However, a class can implement multiple interfaces, providing a clean way to achieve a form of multiple inheritance.</li>
                        <li><strong>Decoupling:</strong> By programming to an interface rather than a concrete class, you reduce dependencies. Your code interacts with the contract, not the specific implementation, making it easier to swap out implementations later.</li>
                        <li><strong>Polymorphism:</strong> You can treat objects of different classes that implement the same interface in a uniform way.</li>
                    </ul>

                    <h5 class="text-lg font-semibold mt-4">Syntax Snippet: Defining an Interface</h5>
<pre><code class="language-csharp">public interface IEngine
{
    void Start();
    void Stop();
    int Horsepower { get; }
}
</code></pre>

                    <h5 class="text-lg font-semibold mt-4">Syntax Snippet: Implementing an Interface</h5>
<pre><code class="language-csharp">public class ElectricEngine : IEngine
{
    public int Horsepower { get; private set; } = 250;

    public void Start()
    {
        Console.WriteLine("Electric engine hums to life silently.");
    }

    public void Stop()
    {
        Console.WriteLine("Electric engine powers down.");
    }
}

public class GasEngine : IEngine
{
    public int Horsepower { get; private set; } = 180;
    
    public void Start()
    {
        Console.WriteLine("Gas engine roars to life!");
    }

    public void Stop()
    {
        Console.WriteLine("Gas engine sputters to a stop.");
    }
}
</code></pre>

                    <h4 class="text-xl font-semibold mt-6">Interactive Visualization: The Interface Contract</h4>
                    <p>The canvas below illustrates how different classes can "plug into" a single interface contract. Each class provides its own unique implementation, but they all conform to the `IDrawable` standard, allowing a single renderer to handle them all.</p>
                    <div class="bg-white p-4 rounded-lg shadow-sm border my-6 chart-container mx-auto" style="height: 300px; max-width: 600px;">
                        <canvas id="interfaceCanvas"></canvas>
                    </div>

                    <h3 class="text-2xl font-semibold mt-12">2. Partial Classes</h3>
                    <p>Partial classes provide a way to split the definition of a class, struct, interface, or method over two or more source files. Each source file contains a section of the type or method definition, and all parts are combined when the application is compiled.</p>

                    <h4 class="text-xl font-semibold mt-6">Why Use Partial Classes?</h4>
                    <ul>
                        <li><strong>Large Projects:</strong> For very large classes, splitting them into separate files can improve readability and maintainability. Different team members can work on different parts of the same class simultaneously.</li>
                        <li><strong>Separating Generated Code:</strong> This is the most common use case. When working with source generators or designer tools (like Windows Forms or ASP.NET), the tool generates one part of the class, and you write your custom logic in another. This prevents your code from being overwritten when the tool regenerates its file.</li>
                    </ul>
                    
                    <h5 class="text-lg font-semibold mt-4">Syntax Snippet: Defining a Partial Class</h5>
                    <p>Both files must use the <code>partial</code> keyword.</p>
                    <p><strong>File: Employee.cs</strong></p>
<pre><code class="language-csharp">public partial class Employee
{
    public int Id { get; set; }
    public string Name { get; set; }
}
</code></pre>
                    <p><strong>File: Employee.Logic.cs</strong></p>
<pre><code class="language-csharp">public partial class Employee
{
    public void Promote()
    {
        Console.WriteLine($"{Name} has been promoted!");
    }
}
</code></pre>
                    <p>At compile time, these two parts are combined into a single <code>Employee</code> class.</p>

                    <h3 class="text-2xl font-semibold mt-12">3. The Interface Segregation Principle (ISP)</h3>
                    <p>ISP is one of the five SOLID principles of object-oriented design. It states that <strong>"no client should be forced to depend on methods it does not use."</strong> In simpler terms, it's better to have many small, specific interfaces than one large, general-purpose one.</p>

                    <h4 class="text-xl font-semibold mt-6">The "Fat Interface" Problem</h4>
                    <p>Imagine an interface for a multi-function printer:</p>
<pre><code class="language-csharp">public interface IMultiFunctionDevice
{
    void Print();
    void Scan();
    void Fax();
}
</code></pre>
                    <p>This works fine for a high-end office machine. But what if you have a cheap, print-only printer? It would be forced to implement <code>Scan()</code> and <code>Fax()</code>, likely by throwing a <code>NotImplementedException</code>. This is a design smell.</p>

                    <h4 class="text-xl font-semibold mt-6">The ISP Solution</h4>
                    <p>Break the large interface into smaller, more cohesive ones:</p>
<pre><code class="language-csharp">public interface IPrinter { void Print(); }
public interface IScanner { void Scan(); }
public interface IFaxer { void Fax(); }
</code></pre>
                    <p>Now, classes can implement only the interfaces they need:</p>
<pre><code class="language-csharp">public class SimplePrinter : IPrinter { ... }
public class Photocopier : IPrinter, IScanner { ... }
public class OfficeHub : IPrinter, IScanner, IFaxer { ... }
</code></pre>
                    <p>This leads to a much cleaner, more flexible, and decoupled design.</p>
                </section>

                <section id="coding-practice" class="scroll-mt-20">
                    <h2 class="text-3xl font-bold border-b pb-2">✅ Coding Practice</h2>
                    <p>Time to apply the theory. Here are some problems to solve, ranging from easy to hard. Complete solutions are provided for you to check your work.</p>

                    <h3 class="text-2xl font-semibold">[Easy] Define Multiple Small Interfaces</h3>
                    <p>Following the Interface Segregation Principle, define three separate interfaces: <code>IPrint</code>, <code>IScan</code>, and <code>IFax</code>. Then, create a <code>MultiFunctionPrinter</code> class that implements all three and a <code>BasicPrinter</code> that only implements <code>IPrint</code>.</p>
                    
                    <h4 class="text-xl font-semibold mt-4">Solution</h4>
<pre><code class="language-csharp">using System;

// 1. Define small, specific interfaces
public interface IPrint
{
    void Print(string document);
}

public interface IScan
{
    void Scan(string document);
}

public interface IFax
{
    void Fax(string document);
}

// 2. Implement all interfaces for a multi-function device
public class MultiFunctionPrinter : IPrint, IScan, IFax
{
    public void Print(string document)
    {
        Console.WriteLine($"Printing: {document}");
    }

    public void Scan(string document)
    {
        Console.WriteLine($"Scanning: {document}");
    }

    public void Fax(string document)
    {
        Console.WriteLine($"Faxing: {document}");
    }
}

// 3. Implement only the necessary interface for a basic device
public class BasicPrinter : IPrint
{
    public void Print(string document)
    {
        Console.WriteLine($"Basic Printer Printing: {document}");
    }
}

public class Program
{
    public static void Main(string[] args)
    {
        MultiFunctionPrinter mfp = new MultiFunctionPrinter();
        mfp.Print("Annual Report");
        mfp.Scan("Invoice");
        mfp.Fax("Contract");

        Console.WriteLine("\n--- Using Basic Printer ---");
        BasicPrinter bp = new BasicPrinter();
        bp.Print("Shopping List");
        // bp.Scan("Receipt"); // This would cause a compile-time error, which is good!
    }
}
</code></pre>
                    <h3 class="text-2xl font-semibold mt-8">[Medium] Implement Factory Pattern for Payments</h3>
                    <p>Create an <code>IPaymentProcessor</code> interface with a method <code>ProcessPayment(decimal amount)</code>. Implement <code>PayPalProcessor</code> and <code>StripeProcessor</code> classes. Then, create a <code>PaymentFactory</code> class with a static method <code>GetPaymentProcessor(string type)</code> that returns an instance of the correct processor based on the input string ("paypal" or "stripe").</p>
                    <div class="bg-white p-4 rounded-lg shadow-sm border my-6 chart-container mx-auto" style="height: 400px; max-width: 700px;">
                        <canvas id="factoryChart"></canvas>
                    </div>

                    <h4 class="text-xl font-semibold mt-4">Solution</h4>
<pre><code class="language-csharp">using System;

// The contract for all payment processors
public interface IPaymentProcessor
{
    void ProcessPayment(decimal amount);
}

// Concrete implementation for PayPal
public class PayPalProcessor : IPaymentProcessor
{
    public void ProcessPayment(decimal amount)
    {
        Console.WriteLine($"Processing ${amount} payment via PayPal.");
        // Logic to interact with PayPal API would go here
    }
}

// Concrete implementation for Stripe
public class StripeProcessor : IPaymentProcessor
{
    public void ProcessPayment(decimal amount)
    {
        Console.WriteLine($"Processing ${amount} payment via Stripe.");
        // Logic to interact with Stripe API would go here
    }
}

// The Factory class to create processor objects
public static class PaymentFactory
{
    public static IPaymentProcessor GetPaymentProcessor(string processorType)
    {
        switch (processorType.ToLower())
        {
            case "paypal":
                return new PayPalProcessor();
            case "stripe":
                return new StripeProcessor();
            default:
                throw new ArgumentException("Invalid payment processor type", nameof(processorType));
        }
    }
}

// Client code that uses the factory
public class Program
{
    public static void Main(string[] args)
    {
        // The client code doesn't need to know about the concrete classes.
        // It just requests a processor from the factory.
        
        string paymentMethod = "stripe"; // This could come from user input or a config file
        
        IPaymentProcessor processor = PaymentFactory.GetPaymentProcessor(paymentMethod);
        processor.ProcessPayment(99.99m);

        paymentMethod = "paypal";
        processor = PaymentFactory.GetPaymentProcessor(paymentMethod);
        processor.ProcessPayment(12.50m);
    }
}
</code></pre>
                </section>
                
                <section id="uml-task" class="scroll-mt-20">
                    <h2 class="text-3xl font-bold border-b pb-2">✅ UML/Schema Task</h2>
                    <p>A UML (Unified Modeling Language) diagram is a visual way to represent the design of a system. The diagram below shows the relationship for our <code>IPaymentProcessor</code> interface and its implementing classes. It clearly illustrates the contract-based design.</p>

                    <div class="bg-white p-6 rounded-lg shadow-sm border my-6 text-center">
                        <h4 class="text-lg font-semibold mb-4">UML Diagram: IPaymentProcessor</h4>
                        <div class="flex flex-col items-center space-y-4">
                            <!-- Interface -->
                            <div class="p-4 border-2 border-dashed border-gray-500 bg-gray-100 rounded-md w-64">
                                <p class="font-semibold italic">&lt;&lt;interface&gt;&gt;</p>
                                <p class="font-bold">IPaymentProcessor</p>
                                <hr class="my-2 border-gray-400">
                                <p class="text-left font-mono text-sm">+ ProcessPayment(amount: decimal): void</p>
                            </div>
                            
                            <!-- Arrow Lines -->
                            <div class="relative w-full h-12">
                                <div class="absolute top-0 left-1/2 w-px h-6 bg-gray-500"></div>
                                <div class="absolute top-6 left-1/4 w-1/2 h-px bg-gray-500"></div>
                                <div class="absolute top-6 left-1/4 w-px h-6 bg-gray-500"></div>
                                <div class="absolute top-6 right-1/4 w-px h-6 bg-gray-500"></div>
                                
                                <!-- Arrowheads -->
                                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-0 h-0 
                                    border-l-8 border-l-transparent
                                    border-r-8 border-r-transparent
                                    border-b-8 border-b-white" style="border-bottom-color: white; filter: drop-shadow(0 1px 0 rgb(107 114 128));"></div>

                            </div>
                            
                            <!-- Implementing Classes -->
                            <div class="flex justify-center space-x-8 w-full">
                                <div class="p-4 border-2 border-solid border-blue-500 bg-blue-50 rounded-md w-64">
                                    <p class="font-bold">PayPalProcessor</p>
                                    <hr class="my-2 border-blue-400">
                                    <p class="text-left font-mono text-sm">+ ProcessPayment(amount: decimal): void</p>
                                </div>
                                <div class="p-4 border-2 border-solid border-green-500 bg-green-50 rounded-md w-64">
                                    <p class="font-bold">StripeProcessor</p>
                                    <hr class="my-2 border-green-400">
                                    <p class="text-left font-mono text-sm">+ ProcessPayment(amount: decimal): void</p>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 text-sm text-gray-600">
                            <p><strong>Key:</strong> A dashed line with a hollow arrow pointing from a class to an interface means "implements" or "realizes".</p>
                        </div>
                    </div>
                </section>
                
                <section id="case-study" class="scroll-mt-20">
                    <h2 class="text-3xl font-bold border-b pb-2">✅ Case Study / Machine Coding</h2>
                    <p>Let's tackle a more comprehensive design problem. This simulates a small-scale, real-world task you might encounter in a job.</p>

                    <h3 class="text-2xl font-semibold">Design a Chat Service with an IMessageSender Interface</h3>
                    <p><strong>Requirements:</strong></p>
                    <ol class="list-decimal list-inside">
                        <li>Design a system that can send notifications through various channels.</li>
                        <li>The core of the system should be an <code>IMessageSender</code> interface. This interface must define a method <code>SendMessage(string recipient, string message)</code>.</li>
                        <li>Create three concrete classes that implement this interface: <code>EmailSender</code>, <code>SmsSender</code>, and <code>PushNotificationSender</code>.</li>
                        <li>Implement a <code>MessageSenderFactory</code> to create instances of these senders based on a requested type (e.g., "email", "sms").</li>
                        <li>Write a client (e.g., a <code>NotificationService</code>) that uses the factory to get a sender and send a message, without knowing the concrete implementation details.</li>
                    </ol>

                    <h4 class="text-xl font-semibold mt-6">Solution Breakdown</h4>
                    <p>This design is highly modular. If we need to add a new notification method tomorrow (like Slack or Teams), we just need to create a new class that implements <code>IMessageSender</code> and update the factory. The <code>NotificationService</code> client code remains completely unchanged.</p>

                    <h5 class="text-lg font-semibold mt-4">1. The `IMessageSender` Interface (The Contract)</h5>
<pre><code class="language-csharp">public interface IMessageSender
{
    void SendMessage(string recipient, string message);
}
</code></pre>

                    <h5 class="text-lg font-semibold mt-4">2. Concrete Implementations</h5>
<pre><code class="language-csharp">using System;

public class EmailSender : IMessageSender
{
    public void SendMessage(string recipient, string message)
    {
        Console.WriteLine($"--- EMAIL ---");
        Console.WriteLine($"To: {recipient}");
        Console.WriteLine($"Body: {message}");
        Console.WriteLine($"Email sent successfully.\n");
    }
}

public class SmsSender : IMessageSender
{
    public void SendMessage(string recipient, string message)
    {
        Console.WriteLine($"--- SMS ---");
        Console.WriteLine($"To Phone Number: {recipient}");
        Console.WriteLine($"Message: {message}");
        Console.WriteLine($"SMS sent successfully.\n");
    }
}

public class PushNotificationSender : IMessageSender
{
    public void SendMessage(string recipient, string message)
    {
        Console.WriteLine($"--- PUSH NOTIFICATION ---");
        Console.WriteLine($"To Device Token: {recipient}");
        Console.WriteLine($"Notification: {message}");
        Console.WriteLine($"Push notification sent successfully.\n");
    }
}
</code></pre>
                    <h5 class="text-lg font-semibold mt-4">3. The `MessageSenderFactory`</h5>
<pre><code class="language-csharp">using System;

public static class MessageSenderFactory
{
    public static IMessageSender GetSender(string type)
    {
        return type.ToLower() switch
        {
            "email" => new EmailSender(),
            "sms" => new SmsSender(),
            "push" => new PushNotificationSender(),
            _ => throw new ArgumentException("Invalid sender type specified."),
        };
    }
}
</code></pre>
                    <h5 class="text-lg font-semibold mt-4">4. Client Code: `NotificationService`</h5>
<pre><code class="language-csharp">using System;

public class NotificationService
{
    public void SendNotification(string type, string recipient, string message)
    {
        try
        {
            IMessageSender sender = MessageSenderFactory.GetSender(type);
            sender.SendMessage(recipient, message);
        }
        catch (ArgumentException ex)
        {
            Console.WriteLine($"Error: {ex.Message}");
        }
    }
}

public class Program
{
    public static void Main(string[] args)
    {
        NotificationService notificationService = new NotificationService();

        // Send an email
        notificationService.SendNotification("email", "test@example.com", "Your order has shipped!");

        // Send an SMS
        notificationService.SendNotification("sms", "+15551234567", "Your package is out for delivery.");

        // Send a push notification
        notificationService.SendNotification("push", "device_token_abc123", "You have a new friend request.");
        
        // Try to send an invalid type
        notificationService.SendNotification("telegram", "user_id_xyz", "This will fail.");
    }
}
</code></pre>
                </section>
                
                <section id="knowledge-check" class="scroll-mt-20">
                    <h2 class="text-3xl font-bold border-b pb-2">✅ Knowledge Check Quiz</h2>
                    <p>Test your understanding of today's topics. Select an answer for each question to see immediate feedback.</p>
                    <div id="quiz-container" class="space-y-6 mt-6">
                        <!-- Quiz questions will be injected here by JS -->
                    </div>
                </section>
                
                <section id="self-assessment" class="scroll-mt-20">
                    <h2 class="text-3xl font-bold border-b pb-2">✅ Self-Assessment Challenge</h2>
                    <p>Here's a final challenge to integrate everything you've learned. Try to solve it on your own before looking at the solution.</p>

                    <h3 class="text-2xl font-semibold">Challenge: Data Exporter System</h3>
                    <p><strong>Scenario:</strong> You are building a feature for an application that needs to export user data in various formats (CSV, JSON, XML). Your task is to design a flexible system using interfaces and a factory to handle this.</p>
                    <p><strong>Requirements:</strong></p>
                    <ul class="list-disc list-inside">
                        <li>Define an interface <code>IDataExporter</code> with one method: <code>string Export(object data)</code>.</li>
                        <li>Create three classes that implement this interface: <code>CsvExporter</code>, <code>JsonExporter</code>, and <code>XmlExporter</code>.</li>
                        <li>Each class's <code>Export</code> method should return a string representing the data in the corresponding format (you can just use a simple placeholder string for the output).</li>
                        <li>Create an <code>ExporterFactory</code> to produce the correct exporter based on an enum or string type.</li>
                        <li>Write a client that uses the factory to export a sample piece of data to all three formats.</li>
                    </ul>

                    <div class="mt-6">
                        <button id="toggle-solution-btn" class="btn btn-primary">Show Solution</button>
                        <div id="solution-content" class="hidden mt-4">
                            <h4 class="text-xl font-semibold">Challenge Solution</h4>
<pre><code class="language-csharp">using System;
using System.Collections.Generic;

// --- Data Model ---
public class User
{
    public int Id { get; set; }
    public string Username { get; set; }
    public string Email { get; set; }
}

// --- Interfaces ---
public interface IDataExporter
{
    string Export(IEnumerable&lt;User&gt; data);
}

// --- Concrete Implementations ---
public class CsvExporter : IDataExporter
{
    public string Export(IEnumerable&lt;User&gt; data)
    {
        Console.WriteLine("Exporting data to CSV format...");
        var lines = new List&lt;string&gt; { "Id,Username,Email" };
        foreach (var user in data)
        {
            lines.Add($"{user.Id},{user.Username},{user.Email}");
        }
        return string.Join("\n", lines);
    }
}

public class JsonExporter : IDataExporter
{
    public string Export(IEnumerable&lt;User&gt; data)
    {
        Console.WriteLine("Exporting data to JSON format...");
        var userStrings = new List&lt;string&gt;();
        foreach (var user in data)
        {
            userStrings.Add($"  {{\n    \"Id\": {user.Id},\n    \"Username\": \"{user.Username}\",\n    \"Email\": \"{user.Email}\"\n  }}");
        }
        return "[\n" + string.Join(",\n", userStrings) + "\n]";
    }
}

public class XmlExporter : IDataExporter
{
    public string Export(IEnumerable&lt;User&gt; data)
    {
        Console.WriteLine("Exporting data to XML format...");
        var userElements = new List&lt;string&gt;();
        foreach (var user in data)
        {
            userElements.Add($"  &lt;User&gt;\n    &lt;Id&gt;{user.Id}&lt;/Id&gt;\n    &lt;Username&gt;{user.Username}&lt;/Username&gt;\n    &lt;Email&gt;{user.Email}&lt;/Email&gt;\n  &lt;/User&gt;");
        }
        return "&lt;Users&gt;\n" + string.Join("\n", userElements) + "\n&lt;/Users&gt;";
    }
}

// --- Factory ---
public static class ExporterFactory
{
    public static IDataExporter GetExporter(string format)
    {
        return format.ToLower() switch
        {
            "csv" => new CsvExporter(),
            "json" => new JsonExporter(),
            "xml" => new XmlExporter(),
            _ => throw new NotSupportedException($"Format '{format}' is not supported."),
        };
    }
}

// --- Client ---
public class Program
{
    public static void Main()
    {
        var users = new List&lt;User&gt;
        {
            new User { Id = 1, Username = "alice", Email = "alice@example.com" },
            new User { Id = 2, Username = "bob", Email = "bob@example.com" }
        };

        string[] formats = { "csv", "json", "xml" };

        foreach (var format in formats)
        {
            try
            {
                IDataExporter exporter = ExporterFactory.GetExporter(format);
                string exportedData = exporter.Export(users);
                Console.WriteLine($"\n--- {format.ToUpper()} OUTPUT ---\n{exportedData}\n");
            }
            catch (NotSupportedException ex)
            {
                Console.WriteLine(ex.Message);
            }
        }
    }
}
</code></pre>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer class="mt-16 py-8 bg-white border-t">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="flex justify-center mb-4">
                <a href="roadmap.html" class="btn btn-primary">Return to Homepage</a>
            </div>
            <p class="text-gray-500">&copy; 2025 OOP Foundations. All Rights Reserved.</p>
            <p class="text-sm mt-1 text-gray-500">A self-contained learning module.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Copy-to-Clipboard ---
            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const code = btn.parentElement.querySelector('pre code').innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        btn.textContent = 'Copied!';
                        setTimeout(() => btn.textContent = 'Copy', 2000);
                    });
                });
            });

            // --- Active TOC Link ---
            const sections = document.querySelectorAll('main section');
            const tocLinks = document.querySelectorAll('.toc-link');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        tocLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${entry.target.id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-40% 0px -60% 0px' });
            sections.forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
