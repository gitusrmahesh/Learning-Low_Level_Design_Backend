<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 17: LINQ - Advanced .NET Concepts</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cool Gray & Slate -->
    <!-- Application Structure Plan: A single-page, two-column lesson layout. The left column contains the main, scrollable content structured sequentially: Introduction, Core Concepts (Deferred Execution, Syntax), a comprehensive and expanded Deep Dive into all major LINQ operator categories (Filtering, Projection, Partitioning, Ordering, Grouping, Joining, Element, Quantifier, Set, Aggregation, Generation), a visual data flow diagram, tabbed Coding Practice, a Case Study, a Knowledge Check quiz, and a Self-Assessment Challenge. The right column features a highly detailed, sticky Table of Contents for easy navigation within the extensive operator guide. This structure supports both linear learning and quick reference. -->
    <!-- Visualization & Content Choices: The main addition is the comprehensive guide to LINQ operators. Each operator is presented in a card with its motivation and examples of increasing complexity to provide depth. For instance, Element operators like First/FirstOrDefault are explicitly contrasted to explain exception handling. This directly addresses user feedback for a 'full-fledged' guide. Other interactive elements like the Deferred Execution demo and tabbed coding problems are retained. No SVG/Mermaid is used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .font-lexend {
            font-family: 'Lexend', sans-serif;
        }
        .code-block {
            position: relative;
        }
        .copy-button {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #475569;
            color: #e2e8f0;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            opacity: 0.5;
            transition: all 0.2s ease-in-out;
        }
        .code-block:hover .copy-button {
            opacity: 1;
        }
        .copy-button:hover {
            background-color: #334155;
        }
        .toc-link.active {
            color: #0ea5e9;
            font-weight: 600;
            border-left-color: #0ea5e9;
        }
        .quiz-option {
            transition: all 0.2s ease-in-out;
        }
        .quiz-option.correct {
            background-color: #dcfce7;
            border-color: #22c55e;
            color: #166534;
        }
        .quiz-option.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
        }
        .data-flow-node {
            transition: all 0.2s ease-in-out;
        }
        .data-flow-node:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            border-color: #38bdf8;
        }
        .data-flow-connector {
            position: relative;
            flex-grow: 1;
            height: 2px;
            background-color: #94a3b8;
        }
        .data-flow-connector::after {
            content: '';
            position: absolute;
            right: -1px;
            top: -4px;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
            border-left: 8px solid #94a3b8;
        }
        .operator-card {
            background-color: white;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.05);
            margin-top: 1.5rem;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="app">
        <div class="bg-slate-100/80 border-b border-slate-200">
            <div class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 relative">
                <header class="text-center">
                    <h1 class="text-4xl sm:text-5xl font-extrabold text-slate-800 mt-1 tracking-tight font-lexend">Low-Level Design Bootcamp</h1>
                    <p class="mt-3 text-slate-600 max-w-xl mx-auto">Your 60-Day Interactive Roadmap to Mastering Backend Engineering.</p>
                </header>
                <a href="roadmap.html" class="absolute top-1/2 -translate-y-1/2 right-4 sm:right-6 lg:right-8 bg-slate-200 text-slate-700 text-sm font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 transition-colors shadow-sm">
                    Return to Homepage
                </a>
            </div>
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="lg:grid lg:grid-cols-12 lg:gap-8">
                <main class="lg:col-span-9">
                    <div class="space-y-16">
                        <section id="introduction">
                            <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">Day 17: LINQ - Querying Your World</h2>
                            <p class="mt-4 text-lg text-slate-600">Welcome to a transformative day in your .NET journey. Today, we delve into Language-Integrated Query (LINQ), a powerful feature that revolutionizes how you interact with data. LINQ provides a consistent, readable, and strongly-typed way to query data from any source, be it in-memory collections, SQL databases, or XML files.</p>
                        </section>

                        <section id="core-concepts">
                             <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">✅ Core Concepts</h2>
                             <div class="mt-8 space-y-12">
                                <div id="deferred-execution">
                                    <h3 class="text-2xl font-semibold font-lexend">Deferred vs. Immediate Execution</h3>
                                    <p class="mt-3 text-slate-600"><strong class="text-slate-700">Deferred Execution</strong> is LINQ's default behavior. It means the query is not run when it is defined, but rather when the results are actually needed (e.g., in a `foreach` loop). This is efficient as it avoids unnecessary work. <strong class="text-slate-700">Immediate Execution</strong> happens when you call an operator that must produce a single value or a concrete collection, like `.ToList()`, `.Count()`, or `.FirstOrDefault()`. These methods force the query to run right away.</p>
                                    <div class="mt-6 border-2 border-slate-200 rounded-xl shadow-sm">
                                        <div class="p-5"><h4 class="text-lg font-semibold text-slate-800">Interactive Demo: Deferred Execution</h4></div>
                                        <div class="p-5 border-t border-slate-200 bg-slate-50">
                                            <div class="flex flex-col sm:flex-row gap-4">
                                                <button id="defineQueryBtn" class="w-full sm:w-auto flex-1 bg-sky-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-sky-600 transition-colors">1. Define Query (Deferred)</button>
                                                <button id="executeQueryBtn" class="w-full sm:w-auto flex-1 bg-emerald-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-emerald-600 transition-colors" disabled>2. Execute Query (Enumerate)</button>
                                            </div>
                                            <div id="deferredLog" class="mt-4 p-4 bg-white rounded-lg h-40 font-mono text-sm text-slate-700 overflow-y-auto border"><p class="text-slate-400">Log will appear here...</p></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="syntax-comparison">
                                    <h3 class="text-2xl font-semibold font-lexend">Query vs. Method Syntax</h3>
                                    <p class="mt-3 text-slate-600">LINQ offers two syntaxes. Functionally, they compile to the same code, so the choice is about readability and which operators are available.</p>
                                    <div class="mt-6 overflow-x-auto">
                                        <table class="w-full border-collapse">
                                            <thead><tr><th class="p-4 border border-slate-300 bg-slate-100 text-left font-semibold">Query Syntax (SQL-like)</th><th class="p-4 border border-slate-300 bg-slate-100 text-left font-semibold">Method Syntax (Fluent)</th></tr></thead>
                                            <tbody>
                                                <tr>
                                                    <td class="p-2 border border-slate-300 align-top"><div class="code-block"><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">var longNames = from p in people
                where p.Name.Length > 10
                select p.Name;</code></pre></div></td>
                                                    <td class="p-2 border border-slate-300 align-top"><div class="code-block"><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">var longNames = people
    .Where(p => p.Name.Length > 10)
    .Select(p => p.Name);</code></pre></div></td>
                                                </tr>
                                                <tr><td class="p-4 border border-slate-300 align-top text-sm">Highly readable for `join` and `group by` clauses. Feels natural for developers with a SQL background.</td><td class="p-4 border border-slate-300 align-top text-sm">More powerful as it exposes ALL LINQ operators (e.g., `Take`, `FirstOrDefault`, `Count`). Chainable and often more concise.</td></tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                             </div>
                        </section>

                        <section id="deep-dive">
                            <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">⚙️ The Full-Fledged LINQ Operator Guide</h2>
                            <p class="mt-4 text-slate-600">LINQ provides a rich toolbox of over 50 standard query operators. We'll explore the most essential ones, categorized by their function.</p>
                            
                            <div id="linq-filtering">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">1. Filtering Operators</h3>
                                <p class="mt-3 text-slate-600">Restrict the result set to elements that satisfy a condition.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Where</h4><p class="mt-2 text-sm text-slate-500">The fundamental filtering operator. It's the `if` statement for your collections.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Find all products that are in stock and cost more than $50.
var expensiveInStock = products.Where(p => p.IsInStock && p.Price > 50);</code></pre></div></div></div>
                            </div>
                            
                            <div id="linq-projection">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">2. Projection Operators</h3>
                                <p class="mt-3 text-slate-600">Transform each element of a sequence into a new form.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Select</h4><p class="mt-2 text-sm text-slate-500">Reshapes the data, picking only the properties you need or creating new objects.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Create a list of simple objects with just the product name and price.
var productSummaries = products.Select(p => new { Name = p.Name, Price = p.Price });</code></pre></div></div></div>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">SelectMany</h4><p class="mt-2 text-sm text-slate-500">Flattens a sequence of sequences into a single sequence.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// From a list of blog posts, get a single flat list of all tags.
var allTags = blogPosts.SelectMany(post => post.Tags).Distinct();</code></pre></div></div></div>
                            </div>

                            <div id="linq-partitioning">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">3. Partitioning Operators</h3>
                                <p class="mt-3 text-slate-600">Take a portion of a sequence. Essential for tasks like pagination.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Take & Skip</h4><p class="mt-2 text-sm text-slate-500">Take returns a specified number of elements from the start; Skip bypasses a specified number.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Get the third page of products, where a page has 10 items.
var page3 = products.Skip(20).Take(10);</code></pre></div></div></div>
                            </div>
                            
                            <div id="linq-ordering">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">4. Ordering Operators</h3>
                                <p class="mt-3 text-slate-600">Sort the elements of a sequence.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">OrderBy / ThenBy / OrderByDescending / ThenByDescending</h4><p class="mt-2 text-sm text-slate-500">Provide primary and secondary sorting criteria.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Sort users by last name, then by first name.
var sortedUsers = users.OrderBy(u => u.LastName).ThenBy(u => u.FirstName);</code></pre></div></div></div>
                            </div>

                             <div id="linq-grouping">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">5. Grouping Operators</h3>
                                <p class="mt-3 text-slate-600">Group elements based on a common key.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">GroupBy</h4><p class="mt-2 text-sm text-slate-500">Partitions data into categories for summary or aggregation. This is one of LINQ's most powerful features.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Group orders by customer and calculate total spent per customer.
var customerSpending = orders
    .GroupBy(o => o.CustomerId)
    .Select(g => new { 
        CustomerId = g.Key, 
        TotalSpent = g.Sum(o => o.Total) 
    });</code></pre></div></div></div>
                            </div>
                            
                            <div id="linq-joining">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">6. Joining Operators</h3>
                                <p class="mt-3 text-slate-600">Combine sequences based on a common key.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Join (Inner Join)</h4><p class="mt-2 text-sm text-slate-500">Enrich data from one source with related data from another, including only elements with a match.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Get a list of products and the categories they belong to.
var productWithCategory = products.Join(categories, 
    p => p.CategoryId, 
    c => c.Id, 
    (p, c) => new { ProductName = p.Name, Category = c.Name });</code></pre></div></div></div>
                            </div>
                            
                            <div id="linq-element">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">7. Element Operators</h3>
                                <p class="mt-3 text-slate-600">Pick a single, specific element from a sequence.</p>
                                <div class="operator-card">
                                    <div class="p-5"><h4 class="text-xl font-semibold font-lexend">First / FirstOrDefault</h4><p class="mt-2 text-sm text-slate-500">Gets the first element. `First` throws an exception if the sequence is empty; `FirstOrDefault` returns the default value (`null` for objects).</p></div>
                                    <div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Safely find the first admin user, or null if none exist.
var admin = users.FirstOrDefault(u => u.IsAdmin);</code></pre></div></div>
                                </div>
                                <div class="operator-card">
                                    <div class="p-5"><h4 class="text-xl font-semibold font-lexend">Single / SingleOrDefault</h4><p class="mt-2 text-sm text-slate-500">Like `First`, but asserts that there is *exactly one* element (or at most one for `SingleOrDefault`). Throws an exception if more than one element matches the condition.</p></div>
                                    <div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Find a user by their unique email address. This should only ever return one.
var specificUser = users.SingleOrDefault(u => u.Email == "unique.email@example.com");</code></pre></div></div>
                                </div>
                            </div>
                            
                             <div id="linq-quantifier">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">8. Quantifier Operators</h3>
                                <p class="mt-3 text-slate-600">Return a boolean value that indicates whether some or all elements satisfy a condition.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Any / All</h4><p class="mt-2 text-sm text-slate-500">`Any` checks if at least one element satisfies a condition. `All` checks if every element satisfies a condition.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Check if there are any overdue books.
bool hasOverdue = books.Any(b => b.DueDate < DateTime.Today);

// Check if all orders in a batch have been shipped.
bool allShipped = orders.All(o => o.Status == "Shipped");</code></pre></div></div></div>
                                 <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Contains</h4><p class="mt-2 text-sm text-slate-500">Checks if a sequence contains a specific element (using the default equality comparer).</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">var requiredPermissions = new[] { "Admin", "SuperUser" };
// Check if the current user has the "Admin" permission.
bool isAdmin = requiredPermissions.Contains(user.Role);</code></pre></div></div></div>
                            </div>
                            
                            <div id="linq-set">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">9. Set Operators</h3>
                                <p class="mt-3 text-slate-600">Perform set operations like removing duplicates, or finding the union or intersection of collections.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Distinct / Union / Intersect / Except</h4><p class="mt-2 text-sm text-slate-500">Standard mathematical set operations.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">var groupA = new[] { 1, 2, 3, 4 };
var groupB = new[] { 3, 4, 5, 6 };

var distinctA = groupA.Distinct(); // { 1, 2, 3, 4 }
var union = groupA.Union(groupB); // { 1, 2, 3, 4, 5, 6 }
var intersect = groupA.Intersect(groupB); // { 3, 4 }
var except = groupA.Except(groupB); // { 1, 2 }</code></pre></div></div></div>
                            </div>
                            
                            <div id="linq-aggregation">
                                <h3 class="text-2xl font-semibold font-lexend mt-12">10. Aggregation & Generation</h3>
                                <p class="mt-3 text-slate-600">Compute a single value from a sequence, or generate a new simple sequence.</p>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Count, Sum, Max, Min, Average</h4><p class="mt-2 text-sm text-slate-500">Calculate summary statistics from a collection. These cause immediate execution.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">// Get statistics for product prices.
var totalProducts = products.Count();
var averagePrice = products.Average(p => p.Price);
var mostExpensive = products.Max(p => p.Price);</code></pre></div></div></div>
                                <div class="operator-card"><div class="p-5"><h4 class="text-xl font-semibold font-lexend">Range, Repeat, Empty</h4><p class="mt-2 text-sm text-slate-500">Generate simple, predictable sequences.</p></div><div class="p-5 border-t border-slate-200"><div class="code-block"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">var tenNumbers = Enumerable.Range(1, 10); // { 1, 2, ..., 10 }
var fiveHellos = Enumerable.Repeat("Hello", 5);
var emptySequence = Enumerable.Empty&lt;Product&gt;();</code></pre></div></div></div>
                            </div>

                        </section>

                        <section id="uml-task">
                             <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">✅ UML Task: Data Flow with LINQ</h2>
                            <p class="mt-4 text-slate-600">This diagram illustrates a typical query pipeline. Data flows from the source, is filtered, then transformed (projected), and finally collected into a result. Hover over each stage to see its role.</p>
                            <div class="mt-8 p-6 bg-white border border-slate-200 rounded-lg shadow-sm"><div class="flex items-center justify-center flex-col sm:flex-row gap-4"><div title="This is your starting point, like a List<T> or an array." class="data-flow-node text-center p-4 border-2 border-slate-300 bg-slate-100 rounded-lg w-48"><p class="font-bold">1. Data Source</p><p class="text-xs text-slate-500">IEnumerable&lt;Product&gt;</p></div><div class="data-flow-connector w-2 sm:w-auto h-8 sm:h-auto"></div><div title="The 'where' clause. It acts as a gatekeeper, only letting items that match the condition pass through." class="data-flow-node text-center p-4 border-2 border-slate-300 bg-sky-100 rounded-lg w-48"><p class="font-bold text-sky-800">2. Filter Operation</p><p class="text-xs text-sky-600">p => p.Price > 50</p></div><div class="data-flow-connector w-2 sm:w-auto h-8 sm:h-auto"></div><div title="The 'select' clause. It transforms each passing item into a new shape or form." class="data-flow-node text-center p-4 border-2 border-slate-300 bg-emerald-100 rounded-lg w-48"><p class="font-bold text-emerald-800">3. Projection</p><p class="text-xs text-emerald-600">p => p.Name</p></div><div class="data-flow-connector w-2 sm:w-auto h-8 sm:h-auto"></div><div title="The final collection, created only when the query is executed. It contains the transformed results." class="data-flow-node text-center p-4 border-2 border-slate-300 bg-indigo-100 rounded-lg w-48"><p class="font-bold text-indigo-800">4. Result</p><p class="text-xs text-indigo-600">IEnumerable&lt;string&gt;</p></div></div></div>
                        </section>

                        <section id="coding-practice">
                            <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">✅ Coding Practice</h2>
                            <p class="mt-4 text-slate-600">Apply what you've learned. Try to solve these before revealing the solution.</p>
                            <div class="mt-6"><div class="sm:hidden"><label for="tabs" class="sr-only">Select a tab</label><select id="tabs" name="tabs" class="block w-full rounded-md border-slate-300 focus:border-sky-500 focus:ring-sky-500"></select></div><div class="hidden sm:block"><div class="border-b border-slate-200"><nav id="tab-buttons" class="-mb-px flex space-x-8" aria-label="Tabs"></nav></div></div></div>
                            <div id="tab-content" class="mt-6"></div>
                        </section>

                        <section id="case-study">
                            <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">✅ Case Study: E-Commerce Reporting Service</h2>
                            <p class="mt-4 text-slate-600">Let's build a mini-reporting service to generate a summary of top-selling products and total revenue by category. This is a perfect real-world use case for LINQ's powerful aggregation and grouping capabilities.</p>
                            <div class="mt-8 space-y-6">
                                <div>
                                    <h4 class="text-xl font-semibold font-lexend">The LINQ Reporting Query</h4>
                                    <div class="code-block mt-3"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">var categoryReports = from p in products
                      join o in orders on p.Id equals o.ProductId
                      group new { p, o } by p.Category into categoryGroup
                      select new
                      {
                          Category = categoryGroup.Key,
                          TotalRevenue = categoryGroup.Sum(x => x.o.Quantity * x.p.Price),
                          TopSellingProduct = categoryGroup
                                              .GroupBy(x => x.p.Name)
                                              .OrderByDescending(g => g.Sum(x => x.o.Quantity))
                                              .Select(g => g.Key)
                                              .FirstOrDefault()
                      };
// Display logic...</code></pre></div>
                                </div>
                            </div>
                        </section>

                        <section id="knowledge-check">
                            <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">🧠 Knowledge Check Quiz</h2>
                            <p class="mt-4 text-slate-600">Test your understanding of the key LINQ concepts.</p>
                            <div id="quiz-container" class="mt-8 space-y-6"></div>
                        </section>

                        <section id="self-assessment">
                            <h2 class="text-3xl font-bold font-lexend tracking-tight text-slate-900">🏆 Self-Assessment Challenge</h2>
                            <div class="mt-6 p-6 border-l-4 border-amber-400 bg-amber-50">
                                <h4 class="text-lg font-bold text-amber-800">The Challenge: Social Media Analyzer</h4>
                                <p class="mt-2 text-amber-700">Given `User` and `Post` lists, write a single LINQ query to find the top 3 most active users. "Most active" means the highest total of likes and comments on all their posts. The output should be a list of strings: `"User: [UserName], Score: [TotalActivity]"`, ordered by score descending.</p>
                                <div class="mt-4"><button id="showChallengeSolution" class="bg-amber-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors">Show Solution</button></div>
                                <div id="challengeSolution" class="hidden mt-4"><div class="code-block mt-3"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">var topUsers = (from u in users
                join p in posts on u.Id equals p.UserId
                group p by u.Name into userPosts
                let activityScore = userPosts.Sum(p => p.Likes + p.Comments)
                orderby activityScore descending
                select $"User: {userPosts.Key}, Score: {activityScore}")
               .Take(3)
               .ToList();</code></pre></div></div>
                            </div>
                        </section>

                    </div>
                </main>

                <aside class="hidden lg:block lg:col-span-3">
                    <nav id="table-of-contents" class="sticky top-24 space-y-2">
                        <h3 class="font-lexend font-semibold text-slate-900">On this page</h3>
                        <a href="#introduction" class="toc-link group flex items-center py-2 text-sm">Introduction</a>
                        <a href="#core-concepts" class="toc-link group flex items-center py-2 text-sm">✅ Core Concepts</a>
                        <a href="#deep-dive" class="toc-link group flex items-center py-2 text-sm">⚙️ Operator Guide</a>
                        <a href="#linq-filtering" class="toc-link group flex items-center py-2 text-sm pl-4">Filtering</a>
                        <a href="#linq-projection" class="toc-link group flex items-center py-2 text-sm pl-4">Projection</a>
                        <a href="#linq-partitioning" class="toc-link group flex items-center py-2 text-sm pl-4">Partitioning</a>
                        <a href="#linq-ordering" class="toc-link group flex items-center py-2 text-sm pl-4">Ordering</a>
                        <a href="#linq-grouping" class="toc-link group flex items-center py-2 text-sm pl-4">Grouping</a>
                        <a href="#linq-joining" class="toc-link group flex items-center py-2 text-sm pl-4">Joining</a>
                        <a href="#linq-element" class="toc-link group flex items-center py-2 text-sm pl-4">Element</a>
                        <a href="#linq-quantifier" class="toc-link group flex items-center py-2 text-sm pl-4">Quantifier</a>
                        <a href="#linq-set" class="toc-link group flex items-center py-2 text-sm pl-4">Set</a>
                        <a href="#linq-aggregation" class="toc-link group flex items-center py-2 text-sm pl-4">Aggregation</a>
                        <a href="#uml-task" class="toc-link group flex items-center py-2 text-sm">✅ UML Task</a>
                        <a href="#coding-practice" class="toc-link group flex items-center py-2 text-sm">✅ Coding Practice</a>
                        <a href="#case-study" class="toc-link group flex items-center py-2 text-sm">✅ Case Study</a>
                        <a href="#knowledge-check" class="toc-link group flex items-center py-2 text-sm">🧠 Knowledge Check</a>
                        <a href="#self-assessment" class="toc-link group flex items-center py-2 text-sm">🏆 Self-Assessment</a>
                    </nav>
                </aside>
            </div>
        </div>

        <footer class="text-center mt-16 py-8 border-t border-slate-200">
            <p class="text-slate-700 font-semibold">Low-Level Design Bootcamp</p>
            <p class="text-sm text-slate-500 mt-2">A personalized learning roadmap curated by Mr. Mahesh Singare.</p>
            <p class="text-xs text-slate-400 mt-4">&copy; 2025. All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Simplified TOC link styling
            document.querySelectorAll('.toc-link').forEach(link => {
                const baseClasses = 'group flex items-center py-2 text-sm text-slate-600 hover:text-sky-600 border-l-2 border-transparent hover:border-sky-500';
                const pl = link.classList.contains('pl-4') ? ' pl-4' : '';
                link.className = baseClasses + pl;
            });

            const copyToClipboard = () => {
                document.querySelectorAll('.code-block .copy-button').forEach(button => {
                    button.addEventListener('click', () => {
                        const code = button.closest('.code-block').querySelector('code').innerText;
                        navigator.clipboard.writeText(code).then(() => {
                            button.innerText = 'Copied!';
                            setTimeout(() => { button.innerText = 'Copy'; }, 2000);
                        });
                    });
                });
            };

            const handleDeferredExecutionDemo = () => {
                const defineBtn = document.getElementById('defineQueryBtn');
                const executeBtn = document.getElementById('executeQueryBtn');
                const log = document.getElementById('deferredLog');
                let queryDefined = false;

                const addToLog = (message, type = 'info') => {
                    if (!log) return;
                    const p = document.createElement('p');
                    p.className = `${type === 'success' ? 'text-emerald-600' : 'text-sky-600'} mb-1`;
                    p.innerHTML = `<span class="font-semibold">${new Date().toLocaleTimeString()}:</span> ${message}`;
                    log.appendChild(p);
                    log.scrollTop = log.scrollHeight;
                };

                if (log) log.innerHTML = ''; else return;
                addToLog('Demo initialized. Ready to define query.');

                defineBtn.addEventListener('click', () => {
                    if (!queryDefined) {
                        addToLog('Defining query: `numbers.Where(...)`');
                        setTimeout(() => {
                            addToLog('✅ Query defined. No execution yet.', 'success');
                            executeBtn.disabled = false; defineBtn.disabled = true; queryDefined = true;
                        }, 500);
                    }
                });

                executeBtn.addEventListener('click', () => {
                    if (queryDefined) {
                        addToLog('Executing query with enumeration...');
                        ['2', '4', '6'].forEach((val, i) => {
                           setTimeout(() => addToLog(`Iterating... Found: ${val}`), (i + 1) * 300);
                        });
                        setTimeout(() => {
                            addToLog('✅ Execution complete.', 'success');
                            executeBtn.disabled = true;
                        }, 1200);
                    }
                });
            };

            const handleCodingPracticeTabs = () => {
                const tabsData = [
                    { name: '[Easy] Filtering & Ordering', id: 'easy-filtering', problem: 'Given a list of `Product` objects, find all products in the "Toys" category, order them by price descending, and select just their names.', solution: `var toyNames = products\n    .Where(p => p.Category == "Toys")\n    .OrderByDescending(p => p.Price)\n    .Select(p => p.Name);`},
                    { name: '[Medium] Grouping & Aggregation', id: 'medium-grouping', problem: 'Given a list of `Order` objects, group them by country and find the total sales amount for each country.', solution: `var salesByCountry = orders\n    .GroupBy(o => o.Country)\n    .Select(g => new {\n        Country = g.Key,\n        TotalSales = g.Sum(o => o.Amount)\n    });`},
                    { name: '[Hard] Joining & Subqueries', id: 'hard-joining', problem: 'Find all customers who have placed an order for more than $500.', solution: `var highValueCustomers = customers.Where(c => \n    orders.Any(o => o.CustomerId == c.Id && o.Amount > 500));\n\n// Alternative using Join:\nvar highValueCustomersJoin = (from c in customers\n                            join o in orders on c.Id equals o.CustomerId\n                            where o.Amount > 500\n                            select c).Distinct();`},
                ];
                const tabButtonsContainer = document.getElementById('tab-buttons');
                const tabContentContainer = document.getElementById('tab-content');
                const tabSelect = document.getElementById('tabs');
                if(!tabButtonsContainer || !tabContentContainer) return;

                tabContentContainer.innerHTML = '';
                tabButtonsContainer.innerHTML = '';
                tabSelect.innerHTML = '';

                tabsData.forEach((tab, index) => {
                    const button = document.createElement('button');
                    button.dataset.target = `#${tab.id}`;
                    button.textContent = tab.name;
                    button.className = `whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${index === 0 ? 'text-sky-600 border-sky-500' : 'text-slate-500 border-transparent hover:text-slate-700 hover:border-slate-300'}`;
                    tabButtonsContainer.appendChild(button);
                    
                    const option = document.createElement('option');
                    option.value = `#${tab.id}`; option.textContent = tab.name;
                    tabSelect.appendChild(option);

                    const content = document.createElement('div');
                    content.id = tab.id; content.className = index === 0 ? '' : 'hidden';
                    content.innerHTML = `<div class="p-5 bg-white border border-slate-200 rounded-lg"><h4 class="font-semibold">Problem:</h4><p class="mt-1">${tab.problem}</p><div class="mt-4"><button data-solution-target="#solution-${tab.id}" class="toggle-solution-btn bg-slate-200 text-slate-700 text-sm font-semibold py-2 px-4 rounded-lg hover:bg-slate-300">Show Solution</button></div><div id="solution-${tab.id}" class="hidden mt-4"><h4 class="font-semibold">Solution:</h4><div class="code-block mt-2"><button class="copy-button">Copy</button><pre class="bg-slate-800 text-white p-4 rounded-lg text-sm overflow-x-auto"><code class="language-csharp">${tab.solution}</code></pre></div></div></div>`;
                    tabContentContainer.appendChild(content);
                });

                function switchTab(targetId) {
                    tabContentContainer.querySelectorAll(':scope > div').forEach(div => div.classList.add('hidden'));
                    document.querySelector(targetId)?.classList.remove('hidden');
                    tabButtonsContainer.querySelectorAll('button').forEach(btn => {
                        const isTarget = btn.dataset.target === targetId;
                        btn.className = `whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${isTarget ? 'text-sky-600 border-sky-500' : 'text-slate-500 border-transparent hover:text-slate-700 hover:border-slate-300'}`;
                    });
                    tabSelect.value = targetId;
                }

                tabButtonsContainer.addEventListener('click', e => e.target.tagName === 'BUTTON' && switchTab(e.target.dataset.target));
                tabSelect.addEventListener('change', e => switchTab(e.target.value));
                document.querySelectorAll('.toggle-solution-btn').forEach(button => {
                    button.addEventListener('click', () => {
                        const solution = document.querySelector(button.dataset.solutionTarget);
                        solution.classList.toggle('hidden');
                        button.textContent = solution.classList.contains('hidden') ? 'Show Solution' : 'Hide Solution';
                    });
                });
            };

            const handleQuiz = () => {
                const quizData = [
                    { question: "To safely get the first element of a sequence that might be empty, you should use:", options: ["First()", "Single()", "FirstOrDefault()", "Any()"], correct: 2, explanation: "`FirstOrDefault()` returns the default value (e.g., null) if the sequence is empty, preventing an exception." },
                    { question: "Which operator would you use to check if ALL items in a collection meet a certain criteria?", options: ["Any()", "Contains()", "Where()", "All()"], correct: 3, explanation: "`All()` returns true only if every element in the sequence satisfies the provided condition." },
                    { question: "What is the primary purpose of the `Take()` and `Skip()` operators?", options: ["Filtering data", "Sorting data", "Pagination", "Joining data"], correct: 2, explanation: "Combining `Skip()` and `Take()` is the standard and most efficient way to implement paging over a sequence." },
                    { question: "Which operator combines two sequences and removes duplicates?", options: ["Concat()", "Join()", "Union()", "Merge()"], correct: 2, explanation: "`Union()` produces the set union of two sequences, which includes all unique elements from both." }
                ];
                const quizContainer = document.getElementById('quiz-container');
                if(!quizContainer) return;
                quizContainer.innerHTML = quizData.map((q, i) => `
                    <div class="p-5 bg-white border border-slate-200 rounded-lg">
                        <p class="font-semibold">${i + 1}. ${q.question}</p>
                        <div class="mt-3 space-y-2">${q.options.map((opt, optI) => `<div data-correct="${optI === q.correct}" class="quiz-option cursor-pointer p-3 border-2 rounded-lg hover:border-sky-400">${opt}</div>`).join('')}</div>
                        <div class="explanation hidden mt-3 p-3 text-sm bg-slate-100 rounded-md">${q.explanation}</div>
                    </div>
                `).join('');
                
                quizContainer.querySelectorAll('.quiz-option').forEach(opt => {
                    opt.addEventListener('click', () => {
                        const parent = opt.parentElement;
                        if (parent.querySelector('.correct, .incorrect')) return;
                        const isCorrect = opt.dataset.correct === 'true';
                        opt.classList.add(isCorrect ? 'correct' : 'incorrect');
                        if (!isCorrect) parent.querySelector('[data-correct="true"]')?.classList.add('correct');
                        parent.nextElementSibling.classList.remove('hidden');
                    });
                });
            };
            
            const handleChallengeSolution = () => {
                const button = document.getElementById('showChallengeSolution');
                const solution = document.getElementById('challengeSolution');
                if (button) button.addEventListener('click', () => {
                    solution.classList.toggle('hidden');
                    button.textContent = solution.classList.contains('hidden') ? 'Show Solution' : 'Hide Solution';
                });
            };

            const handleTocScrollSpy = () => {
                const tocLinks = document.querySelectorAll('.toc-link');
                const sections = Array.from(tocLinks).map(link => document.querySelector(link.getAttribute('href')));

                const observer = new IntersectionObserver(entries => {
                    const visibleSections = entries.filter(e => e.isIntersecting);
                    if (visibleSections.length === 0) return;

                    const topSection = visibleSections.reduce((prev, current) => {
                        return prev.boundingClientRect.top < current.boundingClientRect.top ? prev : current;
                    });
                    
                    const id = topSection.target.getAttribute('id');
                    tocLinks.forEach(link => {
                        link.classList.toggle('active', link.getAttribute('href') === `#${id}`);
                    });

                }, { rootMargin: '-20% 0px -70% 0px', threshold: 0.1 });

                sections.forEach(section => section && observer.observe(section));
            };

            copyToClipboard();
            handleDeferredExecutionDemo();
            handleCodingPracticeTabs();
            handleQuiz();
            handleChallengeSolution();
            handleTocScrollSpy();
        });
    </script>
</body>
</html>

