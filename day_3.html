<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 3: Inheritance & Polymorphism - OOP Foundations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFFFFF;
            color: #3D352E;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
        }
        pre {
            background-color: #1E1E1E;
            color: #D4D4D4;
            font-family: 'Roboto Mono', monospace;
            border-radius: 0.5rem;
            padding: 1.25rem;
            position: relative;
            overflow-x: auto;
            border: 1px solid #3a404a;
        }
        pre code {
            background-color: transparent !important;
            color: inherit;
            padding: 0;
            font-size: inherit;
            border-radius: 0;
        }
        .prose-custom :not(pre) > code {
            background-color: #F3F4F6;
            color: #C06A47;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
        }
        .btn {
            display: inline-block;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            text-align: center;
        }
        .btn-primary {
            background-color: #C06A47; /* Sienna */
            color: #FFFFFF;
            border: 1px solid transparent;
        }
        .btn-primary:hover {
            background-color: #A95A3A; /* Darker Sienna */
        }
        .copy-btn {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background-color: #4A5568;
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            opacity: 0;
            transition: all 0.2s;
        }
        pre:hover .copy-btn {
            opacity: 1;
        }
        .copy-btn:hover {
            background-color: #2D3748;
        }
        .toc-link {
            transition: all 0.2s ease-in-out;
            border-left: 2px solid transparent;
        }
        .toc-link:hover {
            color: #3E8A86; /* Teal */
            border-left-color: #3E8A86;
        }
        .toc-link.active {
            color: #C06A47; /* Sienna */
            border-left-color: #C06A47;
            font-weight: 700;
        }
        .prose-custom { max-width: 80ch; }
        .prose-custom h2 { margin-top: 2.5em; margin-bottom: 1em; }
        .prose-custom h3 { margin-top: 2em; margin-bottom: 0.8em; }
        .prose-custom p, .prose-custom ul, .prose-custom ol { line-height: 1.7; }
        .shadow-sm { box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); }
        .bg-white { background-color: #FFFFFF; }
        .border, .border-t { border-color: #e5e7eb; }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white shadow-md fixed top-0 left-0 right-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-3">
                <div class="text-2xl font-bold text-sienna-800">
                    <a href="roadmap.html">OOP Foundations</a>
                </div>
                <nav class="hidden md:flex space-x-4">
                    <a href="day_1.html" class="text-gray-600 hover:text-teal-600 transition">Day 1</a>
                    <a href="day_2.html" class="text-gray-600 hover:text-teal-600 transition">Day 2</a>
                    <a href="day_3.html" class="font-bold text-teal-600">Day 3</a>
                    <a href="day_4.html" class="text-gray-600 hover:text-teal-600 transition">Day 4</a>
                    <a href="day_5.html" class="text-gray-600 hover:text-teal-600 transition">Day 5</a>
                    <a href="day_6.html" class="text-gray-600 hover:text-teal-600 transition">Day 6</a>
                    <a href="day_7.html" class="text-gray-600 hover:text-teal-600 transition">Day 7</a>
                </nav>
                <!-- Return to Homepage button removed from here -->
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 pt-24">
        <div class="flex justify-between items-center mb-12">
            <div class="text-center">
                <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-sienna-800">Day 3: Inheritance & Polymorphism</h1>
                <p class="mt-4 text-xl text-gray-600">Building on yesterday's foundations, today we explore two cornerstone principles of OOP that enable code reuse and flexibility: Inheritance and Polymorphism.</p>
            </div>
            <a href="roadmap.html" class="btn btn-primary whitespace-nowrap">Return to Homepage</a>
        </div>

        <div class="flex flex-col lg:flex-row-reverse lg:space-x-reverse lg:space-x-12">
            <aside class="w-full lg:w-1/4 lg:sticky lg:top-24 self-start mb-12 lg:mb-0">
                <div class="p-4 rounded-lg bg-white shadow-sm border">
                    <h3 class="text-lg font-semibold mb-4">On This Page</h3>
                    <nav id="toc-nav" class="flex flex-col space-y-2">
                        <a href="#introduction" class="toc-link pl-2 text-gray-600">Introduction</a>
                        <a href="#theory" class="toc-link pl-2 text-gray-600">âœ… Theory Topics</a>
                        <a href="#practice" class="toc-link pl-2 text-gray-600">ðŸ’» Coding Practice</a>
                        <a href="#uml" class="toc-link pl-2 text-gray-600">ðŸŽ¨ UML/Schema Task</a>
                        <a href="#case-study" class="toc-link pl-2 text-gray-600">ðŸš— Case Study: Ride-Hailing</a>
                        <a href="#quiz" class="toc-link pl-2 text-gray-600">ðŸ§  Knowledge Check</a>
                        <a href="#challenge" class="toc-link pl-2 text-gray-600">ðŸš€ Self-Assessment Challenge</a>
                    </nav>
                </div>
            </aside>

            <div class="w-full lg:w-3/4 prose-custom">
                 <section id="introduction" class="section-card">
                    <h1 class="text-4xl font-bold text-[#8D5B4C] mb-2">Day 3: Inheritance & Polymorphism</h1>
                    <p class="text-lg text-gray-600">Building on yesterday's foundations, today we explore two cornerstone principles of OOP that enable code reuse and flexibility: Inheritance and Polymorphism.</p>
                    <div class="callout">
                        <p><strong>ðŸ’¡ Today's Goal:</strong> Understand how to create class hierarchies to share code (Inheritance) and how to treat objects of different classes in the same way (Polymorphism). This is where your code starts to become truly dynamic and scalable.</p>
                    </div>
                </section>

                <!-- Theory -->
                <section id="theory" class="section-card">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-2">âœ… Theory Topics</h2>
                    
                    <div id="theory-inheritance" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">Base and Derived Classes in C#</h3>
                        <p class="mb-4">Inheritance is a mechanism where a new class (the <strong class="text-[#8D5B4C]">derived</strong> or child class) inherits properties and methods from an existing class (the <strong class="text-[#8D5B4C]">base</strong> or parent class). This promotes code reusability and establishes a logical "is-a" relationship.</p>
                        <p class="mb-4"><strong>Analogy:</strong> Think of a <code class="font-mono text-sm bg-gray-100 p-1 rounded">Vehicle</code> as a base class. It has properties like <code class="font-mono text-sm bg-gray-100 p-1 rounded">Speed</code> and methods like <code class="font-mono text-sm bg-gray-100 p-1 rounded">Move()</code>. A <code class="font-mono text-sm bg-gray-100 p-1 rounded">Car</code> and a <code class="font-mono text-sm bg-gray-100 p-1 rounded">Bicycle</code> can be derived classes. They both *are* vehicles, so they inherit the ability to move, but they might implement it differently or add their own unique features (like a Car having an <code class="font-mono text-sm bg-gray-100 p-1 rounded">Engine</code>).</p>
                        <div class="syntax-snippet">
                            <h4 class="font-semibold text-gray-700 mb-2">Syntax</h4>
                            <div class="code-block">
                                <button class="copy-btn">Copy</button>
                                <pre><code class="language-csharp">public class BaseClassName 
{ 
    // Members of the base class 
}

public class DerivedClassName : BaseClassName 
{ 
    // Members of the derived class
}</code></pre>
                            </div>
                        </div>
                        <div class="code-block mt-4">
                            <button class="copy-btn">Copy</button>
                            <pre><code class="language-csharp">// Base class
public class Vehicle
{
    public int Speed { get; set; }

    public void Move()
    {
        Console.WriteLine("The vehicle is moving.");
    }
}

// Derived class
public class Car : Vehicle
{
    public int NumberOfDoors { get; set; }
}

// Usage
var myCar = new Car();
myCar.Speed = 100; // Inherited from Vehicle
myCar.NumberOfDoors = 4; // Specific to Car
myCar.Move(); // Inherited from Vehicle
</code></pre>
                        </div>
                    </div>

                    <div id="theory-abstract-vs-interface" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">Abstract Classes vs. Interfaces</h3>
                        <p class="mb-4">Both are used to achieve abstraction, but they serve different purposes. An <strong class="text-[#8D5B4C]">abstract class</strong> is a blueprint for related classes (an "is-a" relationship), while an <strong class="text-[#8D5B4C]">interface</strong> defines a capability or contract that a class can implement (a "can-do" relationship).</p>
                        
                        <div class="callout">
                            <p><strong>Key Difference:</strong> A class can inherit from only <strong class="text-[#8D5B4C]">one</strong> abstract class, but it can implement <strong class="text-[#8D5B4C]">multiple</strong> interfaces. Think of it like a person: you can only have one biological father (single inheritance), but you can have multiple jobs or roles like 'Doctor', 'Parent', 'Musician' (multiple interfaces).</p>
                        </div>

                        <h4 class="font-semibold text-gray-700 my-4">Interactive Comparison</h4>
                        <p class="text-sm text-gray-600 mb-2">Click the buttons to see how features are distributed between Abstract Classes and Interfaces.</p>
                        
                        <div class="overflow-x-auto mt-6">
                            <table class="w-full text-left border-collapse">
                                <thead>
                                    <tr>
                                        <th class="border-b-2 p-2 bg-gray-50">Feature</th>
                                        <th class="border-b-2 p-2 bg-gray-50">Abstract Class</th>
                                        <th class="border-b-2 p-2 bg-gray-50">Interface</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="border-b p-2">Method Implementation</td>
                                        <td class="border-b p-2">Can contain both abstract (no body) and concrete (with body) methods.</td>
                                        <td class="border-b p-2">Cannot contain implementation for methods (prior to C# 8.0). Primarily just signatures.</td>
                                    </tr>
                                    <tr>
                                        <td class="border-b p-2">Fields/Variables</td>
                                        <td class="border-b p-2">Can contain fields.</td>
                                        <td class="border-b p-2">Cannot contain fields (only properties).</td>
                                    </tr>
                                    <tr>
                                        <td class="border-b p-2">Inheritance</td>
                                        <td class="border-b p-2">A class can inherit from only one abstract class.</td>
                                        <td class="border-b p-2">A class can implement multiple interfaces.</td>
                                    </tr>
                                    <tr>
                                        <td class="border-b p-2">Access Modifiers</td>
                                        <td class="border-b p-2">Members can have any access modifier (public, protected, private).</td>
                                        <td class="border-b p-2">All members are implicitly public.</td>
                                    </tr>
                                     <tr>
                                        <td class="border-b p-2">Constructors</td>
                                        <td class="border-b p-2">Can have constructors.</td>
                                        <td class="border-b p-2">Cannot have constructors.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div id="theory-overriding" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">Method Overriding (virtual, override, sealed)</h3>
                        <p class="mb-4">Method overriding allows a derived class to provide its own specific implementation of a method that is already defined in its base class. This is a key part of polymorphism.</p>
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li><code class="font-mono text-sm bg-gray-100 p-1 rounded">virtual</code>: Used in the base class to indicate that a method *can* be overridden by derived classes.</li>
                            <li><code class="font-mono text-sm bg-gray-100 p-1 rounded">override</code>: Used in the derived class to provide a new implementation for a virtual method from the base class.</li>
                            <li><code class="font-mono text-sm bg-gray-100 p-1 rounded">sealed</code>: Used on an overridden method to prevent any further derived classes from overriding it again.</li>
                        </ul>
                         <div class="syntax-snippet">
                            <h4 class="font-semibold text-gray-700 mb-2">Syntax</h4>
                            <div class="code-block">
                                <button class="copy-btn">Copy</button>
                                <pre><code class="language-csharp">public class Base
{
    public virtual void MyMethod() { /* ... */ }
}
public class Derived : Base
{
    public override void MyMethod() { /* ... */ }
}
public class FurtherDerived : Derived
{
    // Cannot override MyMethod if it was sealed in Derived
}</code></pre>
                            </div>
                        </div>
                    </div>

                    <div id="theory-polymorphism" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">Polymorphism in Backend Practice</h3>
                        <p class="mb-4">Polymorphism (from Greek, meaning "many forms") allows us to treat objects of different classes that share a common base class or interface as if they were objects of that base type. This simplifies code and makes it incredibly flexible.</p>
                        <p class="mb-4"><strong>Example Scenario:</strong> A payment processing system. You don't want to write separate logic for every single payment type. Instead, you can create a common <code class="font-mono text-sm bg-gray-100 p-1 rounded">PaymentMethod</code> base class or interface with a <code class="font-mono text-sm bg-gray-100 p-1 rounded">ProcessPayment()</code> method. Then, you create specific classes like <code class="font-mono text-sm bg-gray-100 p-1 rounded">CreditCardPayment</code>, <code class="font-mono text-sm bg-gray-100 p-1 rounded">UpiPayment</code>, and <code class="font-mono text-sm bg-gray-100 p-1 rounded">WalletPayment</code> that each provide their own implementation of <code class="font-mono text-sm bg-gray-100 p-1 rounded">ProcessPayment()</code>.</p>
                        <div class="code-block">
                            <button class="copy-btn">Copy</button>
                            <pre><code class="language-csharp">public abstract class PaymentMethod
{
    public abstract void ProcessPayment(decimal amount);
}

public class CreditCardPayment : PaymentMethod
{
    public override void ProcessPayment(decimal amount)
    {
        Console.WriteLine($"Processing credit card payment of ${amount}.");
    }
}

public class UpiPayment : PaymentMethod
{
    public override void ProcessPayment(decimal amount)
    {
        Console.WriteLine($"Processing UPI payment of ${amount}.");
    }
}

// Polymorphic usage
List&lt;PaymentMethod&gt; payments = new List&lt;PaymentMethod&gt;();
payments.Add(new CreditCardPayment());
payments.Add(new UpiPayment());

foreach (var paymentMethod in payments)
{
    // The correct ProcessPayment is called for each object type!
    paymentMethod.ProcessPayment(100.50m);
}
</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Coding Practice -->
                <section id="practice" class="section-card">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-2">ðŸ’» Coding Practice</h2>
                    
                    <div id="practice-shape" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">Base: Shape Hierarchy</h3>
                        <p class="mb-4">Create an abstract base class <code class="font-mono text-sm bg-gray-100 p-1 rounded">Shape</code> with an abstract method <code class="font-mono text-sm bg-gray-100 p-1 rounded">CalculateArea()</code>. Then, derive <code class="font-mono text-sm bg-gray-100 p-1 rounded">Circle</code> and <code class="font-mono text-sm bg-gray-100 p-1 rounded">Rectangle</code> classes from it and implement the area calculation for each.</p>
                        <div class="solution-toggle" onclick="toggleSolution('solution-shape')">Show Solution</div>
                        <div id="solution-shape" class="solution-content">
                            <div class="code-block">
                                <button class="copy-btn">Copy</button>
                                <pre><code class="language-csharp">using System;
using System.Collections.Generic;

// Abstract base class
public abstract class Shape
{
    // Abstract method - must be implemented by derived classes
    public abstract double CalculateArea();
}

// Derived Circle class
public class Circle : Shape
{
    public double Radius { get; set; }

    public Circle(double radius)
    {
        Radius = radius;
    }

    // Implementing the abstract method
    public override double CalculateArea()
    {
        return Math.PI * Radius * Radius;
    }
}

// Derived Rectangle class
public class Rectangle : Shape
{
    public double Width { get; set; }
    public double Height { get; set; }

    public Rectangle(double width, double height)
    {
        Width = width;
        Height = height;
    }

    // Implementing the abstract method
    public override double CalculateArea()
    {
        return Width * Height;
    }
}

public class Program
{
    public static void Main()
    {
        List&lt;Shape&gt; shapes = new List&lt;Shape&gt;
        {
            new Circle(5),
            new Rectangle(4, 6)
        };

        foreach (var shape in shapes)
        {
            // Polymorphism in action!
            // We don't need to know the specific type of shape.
            // We just call CalculateArea() and the correct version is executed.
            Console.WriteLine($"Area: {shape.CalculateArea():F2}");
        }
    }
}
</code></pre>
                            </div>
                        </div>
                    </div>

                    <div id="practice-animal" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">[Easy] Animal Hierarchy</h3>
                        <p class="mb-4">Implement a base class <code class="font-mono text-sm bg-gray-100 p-1 rounded">Animal</code> with a virtual method <code class="font-mono text-sm bg-gray-100 p-1 rounded">MakeSound()</code>. Create <code class="font-mono text-sm bg-gray-100 p-1 rounded">Dog</code> and <code class="font-mono text-sm bg-gray-100 p-1 rounded">Cat</code> subclasses that override this method to print "Woof" and "Meow" respectively.</p>
                        <div class="solution-toggle" onclick="toggleSolution('solution-animal')">Show Solution</div>
                        <div id="solution-animal" class="solution-content">
                            <div class="code-block">
                                <button class="copy-btn">Copy</button>
                                <pre><code class="language-csharp">using System;
using System.Collections.Generic;

// Base class with a virtual method
public class Animal
{
    public virtual void MakeSound()
    {
        Console.WriteLine("Some generic animal sound");
    }
}

// Dog subclass overriding the method
public class Dog : Animal
{
    public override void MakeSound()
    {
        Console.WriteLine("Woof");
    }
}

// Cat subclass overriding the method
public class Cat : Animal
{
    public override void MakeSound()
    {
        Console.WriteLine("Meow");
    }
}

public class Program
{
    public static void Main()
    {
        List&lt;Animal&gt; animals = new List&lt;Animal&gt;
        {
            new Animal(),
            new Dog(),
            new Cat()
        };
        
        foreach(var animal in animals)
        {
            animal.MakeSound(); // The correct sound is made for each type
        }
    }
}
</code></pre>
                            </div>
                        </div>
                    </div>

                    <div id="practice-payment" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">[Medium] Payment Processor Interface</h3>
                        <p class="mb-4">Define an interface <code class="font-mono text-sm bg-gray-100 p-1 rounded">IPaymentProcessor</code> with two methods: <code class="font-mono text-sm bg-gray-100 p-1 rounded">ProcessPayment(decimal amount)</code> and <code class="font-mono text-sm bg-gray-100 p-1 rounded">GetTransactionStatus(string transactionId)</code>. Implement this interface in three classes: <code class="font-mono text-sm bg-gray-100 p-1 rounded">PayPalProcessor</code>, <code class="font-mono text-sm bg-gray-100 p-1 rounded">StripeProcessor</code>, and <code class="font-mono text-sm bg-gray-100 p-1 rounded">SquareProcessor</code>.</p>
                        <div class="solution-toggle" onclick="toggleSolution('solution-payment')">Show Solution</div>
                        <div id="solution-payment" class="solution-content">
                             <div class="code-block">
                                <button class="copy-btn">Copy</button>
                                <pre><code class="language-csharp">using System;

// The contract for all payment processors
public interface IPaymentProcessor
{
    bool ProcessPayment(decimal amount);
    string GetTransactionStatus(string transactionId);
}

// PayPal's implementation of the contract
public class PayPalProcessor : IPaymentProcessor
{
    public bool ProcessPayment(decimal amount)
    {
        Console.WriteLine($"Processing ${amount} via PayPal.");
        // Logic to connect to PayPal API...
        return true; // Assume success
    }

    public string GetTransactionStatus(string transactionId)
    {
        return $"PayPal Transaction {transactionId}: Completed";
    }
}

// Stripe's implementation of the contract
public class StripeProcessor : IPaymentProcessor
{
    public bool ProcessPayment(decimal amount)
    {
        Console.WriteLine($"Processing ${amount} via Stripe.");
        // Logic to connect to Stripe API...
        return true; // Assume success
    }

    public string GetTransactionStatus(string transactionId)
    {
        return $"Stripe Transaction {transactionId}: Succeeded";
    }
}

// Square's implementation of the contract
public class SquareProcessor : IPaymentProcessor
{
    public bool ProcessPayment(decimal amount)
    {
        Console.WriteLine($"Processing ${amount} via Square.");
        // Logic to connect to Square API...
        return false; // Assume failure for demonstration
    }

    public string GetTransactionStatus(string transactionId)
    {
        return $"Square Transaction {transactionId}: Failed";
    }
}

public class ECommerceSite
{
    private readonly IPaymentProcessor _processor;

    // The site can work with ANY payment processor that follows the interface
    public ECommerceSite(IPaymentProcessor processor)
    {
        _processor = processor;
    }

    public void Checkout(decimal orderTotal)
    {
        Console.WriteLine("\n--- Starting Checkout ---");
        bool success = _processor.ProcessPayment(orderTotal);
        Console.WriteLine(success ? "Payment successful!" : "Payment failed.");
        Console.WriteLine(_processor.GetTransactionStatus("txn_12345"));
        Console.WriteLine("-------------------------");
    }
}

public class Program
{
    public static void Main()
    {
        // We can easily swap out the payment processor
        var siteWithPayPal = new ECommerceSite(new PayPalProcessor());
        siteWithPayPal.Checkout(19.99m);

        var siteWithStripe = new ECommerceSite(new StripeProcessor());
        siteWithStripe.Checkout(250.00m);
        
        var siteWithSquare = new ECommerceSite(new SquareProcessor());
        siteWithSquare.Checkout(75.50m);
    }
}
</code></pre>
                            </div>
                        </div>
                    </div>

                    <div id="practice-notification" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-3">[Medium-Hard] Notification System</h3>
                        <p class="mb-4">Design a notification system. Create a base abstract class <code class="font-mono text-sm bg-gray-100 p-1 rounded">Notification</code> with a constructor to accept a recipient and a message, and an abstract method <code class="font-mono text-sm bg-gray-100 p-1 rounded">Send()</code>. Create derived classes <code class="font-mono text-sm bg-gray-100 p-1 rounded">EmailNotification</code>, <code class="font-mono text-sm bg-gray-100 p-1 rounded">SmsNotification</code>, and <code class="font-mono text-sm bg-gray-100 p-1 rounded">PushNotification</code>. Each class should have a specific implementation for sending the notification.</p>
                        <div class="solution-toggle" onclick="toggleSolution('solution-notification')">Show Solution</div>
                        <div id="solution-notification" class="solution-content">
                            <div class="code-block">
                                <button class="copy-btn">Copy</button>
                                <pre><code class="language-csharp">using System;
using System.Collections.Generic;

// Base abstract class providing common properties and abstract method
public abstract class Notification
{
    public string Recipient { get; protected set; }
    public string Message { get; protected set; }

    protected Notification(string recipient, string message)
    {
        Recipient = recipient;
        Message = message;
    }

    // This method MUST be implemented by any class that inherits from Notification
    public abstract void Send();
}

// Email implementation
public class EmailNotification : Notification
{
    public string Subject { get; set; }

    public EmailNotification(string recipient, string subject, string message) : base(recipient, message)
    {
        Subject = subject;
    }

    public override void Send()
    {
        Console.WriteLine($"--- Sending Email ---");
        Console.WriteLine($"To: {Recipient}");
        Console.WriteLine($"Subject: {Subject}");
        Console.WriteLine($"Body: {Message}");
        Console.WriteLine($"---------------------");
    }
}

// SMS implementation
public class SmsNotification : Notification
{
    public SmsNotification(string phoneNumber, string message) : base(phoneNumber, message) { }

    public override void Send()
    {
        // Message might need to be truncated for SMS
        string shortMessage = Message.Length > 160 ? Message.Substring(0, 160) + "..." : Message;
        Console.WriteLine($"--- Sending SMS ---");
        Console.WriteLine($"To Phone: {Recipient}");
        Console.WriteLine($"Message: {shortMessage}");
        Console.WriteLine($"-------------------");
    }
}

// Push notification implementation
public class PushNotification : Notification
{
    public string DeviceId { get; } // Recipient is the Device ID

    public PushNotification(string deviceId, string message) : base(deviceId, message) 
    {
        DeviceId = deviceId;
    }

    public override void Send()
    {
        Console.WriteLine($"--- Sending Push Notification ---");
        Console.WriteLine($"To Device: {DeviceId}");
        Console.WriteLine($"Payload: {Message}");
        Console.WriteLine($"-------------------------------");
    }
}

public class NotificationService
{
    public void SendNotifications(List&lt;Notification&gt; notifications)
    {
        foreach (var notification in notifications)
        {
            // The service doesn't care about the type, it just calls Send()
            notification.Send();
            Console.WriteLine(); // Add a blank line for readability
        }
    }
}

public class Program
{
    public static void Main()
    {
        var notificationsToSend = new List&lt;Notification&gt;
        {
            new EmailNotification("test@example.com", "Order Confirmed", "Your order #123 has been confirmed."),
            new SmsNotification("+11234567890", "Your package has been shipped!"),
            new PushNotification("device-token-abc-123", "You have a new friend request.")
        };

        var service = new NotificationService();
        service.SendNotifications(notificationsToSend);
    }
}
</code></pre>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- UML Task -->
                <section id="uml" class="section-card">
                     <h2 class="text-3xl font-bold mb-6 border-b pb-2">ðŸŽ¨ UML/Schema Task</h2>
                     <p class="mb-4">A UML (Unified Modeling Language) diagram helps visualize the structure of a system, including its classes and their relationships. Below is an inheritance diagram for an Employee hierarchy.</p>
                     <div class="callout">
                        <p><strong>Reading the Diagram:</strong> The arrow (with a hollow triangle head) points from the derived (child) class to the base (parent) class. This signifies an "is-a" relationship (e.g., a Manager *is an* Employee).</p>
                     </div>
                     <div class="flex justify-center items-center flex-col p-6 space-y-2 bg-gray-50 rounded-lg">
                        <div class="border-2 border-gray-600 bg-white p-4 rounded-md shadow-md text-center w-56">
                            <h4 class="font-bold">Employee (Base)</h4>
                            <hr class="my-2">
                            <p class="text-sm text-left">- Name: string</p>
                            <p class="text-sm text-left">- EmployeeId: int</p>
                            <p class="text-sm text-left">+ CalculateSalary(): double</p>
                        </div>
                        <div class="h-8 w-px bg-gray-500"></div>
                        <div class="flex space-x-16">
                            <!-- Arrow stem for Manager -->
                            <div class="relative w-56 flex flex-col items-center">
                                <div class="absolute -top-8 h-8 w-px bg-gray-500"></div>
                                <div class="absolute -top-10 h-0 w-0 border-x-8 border-x-transparent border-t-[10px] border-t-gray-500"></div>
                                <div class="border-2 border-blue-600 bg-blue-50 p-4 rounded-md shadow-md text-center w-full">
                                    <h4 class="font-bold">Manager</h4>
                                    <hr class="my-2">
                                    <p class="text-sm text-left">- Bonus: double</p>
                                    <p class="text-sm text-left">+ override CalculateSalary()</p>
                                </div>
                            </div>
                            <!-- Arrow stem for Developer -->
                            <div class="relative w-56 flex flex-col items-center">
                                 <div class="absolute -top-8 h-8 w-px bg-gray-500"></div>
                                <div class="absolute -top-10 h-0 w-0 border-x-8 border-x-transparent border-t-[10px] border-t-gray-500"></div>
                                <div class="border-2 border-green-600 bg-green-50 p-4 rounded-md shadow-md text-center w-full">
                                    <h4 class="font-bold">Developer</h4>
                                    <hr class="my-2">
                                    <p class="text-sm text-left">- LinesOfCode: int</p>
                                    <p class="text-sm text-left">+ override CalculateSalary()</p>
                                </div>
                            </div>
                        </div>
                     </div>
                </section>
                
                <!-- Case Study -->
                <section id="case-study" class="section-card">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-2">ðŸš— Case Study: Ride-Hailing System</h2>
                    <p class="mb-4">Let's design a simplified model for a ride-hailing service like Uber or Lyft. This is a classic example where polymorphism shines.</p>
                    
                    <h3 class="text-xl font-semibold mb-2">1. Entity Breakdown</h3>
                    <ul class="list-disc list-inside space-y-1 mb-4">
                        <li><strong>Rider:</strong> Represents the customer. Has properties like Name, Rating.</li>
                        <li><strong>Driver:</strong> Represents the service provider. Has properties like Name, Rating, VehicleDetails.</li>
                        <li><strong>Ride:</strong> This is our core abstract entity. It will have properties common to all rides (StartLocation, EndLocation, Rider, Driver) and an abstract method <code class="font-mono text-sm bg-gray-100 p-1 rounded">CalculateFare()</code>.</li>
                    </ul>

                    <h3 class="text-xl font-semibold mb-2">2. Methods</h3>
                     <ul class="list-disc list-inside space-y-1 mb-4">
                        <li><strong>BookRide():</strong> A method in a service class that takes rider details and creates a specific type of Ride object.</li>
                        <li><strong>AcceptRide():</strong> A method a Driver can call to accept a Ride.</li>
                        <li><strong>CompleteRide():</strong> Marks a ride as finished and calculates the final fare.</li>
                    </ul>

                    <h3 class="text-xl font-semibold mb-2">3. Polymorphism: The Key to Flexibility</h3>
                    <p class="mb-4">We won't just have one type of ride. We can create derived classes from our abstract <code class="font-mono text-sm bg-gray-100 p-1 rounded">Ride</code> class. Each will have its own fare calculation logic.</p>
                    <ul class="list-disc list-inside space-y-1 mb-4">
                        <li><strong class="text-[#8D5B4C]">EconomyRide:</strong> Standard fare calculation (base rate + per km rate).</li>
                        <li><strong class="text-[#8D5B4C]">PremiumRide:</strong> Higher base rate, per km rate, and includes a premium surcharge.</li>
                        <li><strong class="text-[#8D5B4C]">RidePool:</strong> Fare is split among riders, possibly with a lower base rate.</li>
                    </ul>
                    <p>The system's core logic can work with any object of type <code class="font-mono text-sm bg-gray-100 p-1 rounded">Ride</code>. When it calls <code class="font-mono text-sm bg-gray-100 p-1 rounded">CalculateFare()</code>, polymorphism ensures the correct calculation is used for an Economy, Premium, or Pool ride without any `if/else` checks.</p>
                    
                     <div class="solution-toggle" onclick="toggleSolution('solution-ridehail')">Show Full C# Implementation</div>
                     <div id="solution-ridehail" class="solution-content">
                        <div class="code-block">
                            <button class="copy-btn">Copy</button>
                            <pre><code class="language-csharp">using System;
using System.Collections.Generic;

// --- Entities ---
public class Rider { public string Name { get; set; } }
public class Driver { public string Name { get; set; } }

// Abstract base class for all Ride types
public abstract class Ride
{
    public string StartLocation { get; }
    public string EndLocation { get; }
    public Rider Rider { get; }
    public Driver Driver { get; set; }
    public double DistanceInKm { get; }

    protected Ride(string start, string end, Rider rider, double distance)
    {
        StartLocation = start;
        EndLocation = end;
        Rider = rider;
        DistanceInKm = distance;
    }

    public void AssignDriver(Driver driver)
    {
        this.Driver = driver;
        Console.WriteLine($"Driver {driver.Name} assigned to the ride.");
    }

    // The polymorphic method
    public abstract decimal CalculateFare();
}

// --- Concrete Ride Implementations ---

public class EconomyRide : Ride
{
    private const decimal BaseFare = 50m;
    private const decimal RatePerKm = 12m;

    public EconomyRide(string start, string end, Rider rider, double distance) : base(start, end, rider, distance) { }

    public override decimal CalculateFare()
    {
        return BaseFare + (decimal)DistanceInKm * RatePerKm;
    }
}

public class PremiumRide : Ride
{
    private const decimal BaseFare = 100m;
    private const decimal RatePerKm = 20m;
    private const decimal PremiumSurcharge = 50m;

    public PremiumRide(string start, string end, Rider rider, double distance) : base(start, end, rider, distance) { }

    public override decimal CalculateFare()
    {
        return BaseFare + ((decimal)DistanceInKm * RatePerKm) + PremiumSurcharge;
    }
}

public class RidePool : Ride
{
    private const decimal BaseFare = 30m;
    private const decimal RatePerKm = 8m;
    public int NumberOfRiders { get; set; } = 1;

    public RidePool(string start, string end, Rider rider, double distance) : base(start, end, rider, distance) { }
    
    public override decimal CalculateFare()
    {
        // Fare per person is reduced
        decimal totalFare = BaseFare + (decimal)DistanceInKm * RatePerKm;
        return totalFare / NumberOfRiders;
    }
}

// --- Service to manage rides ---
public class RideHailingService
{
    public void CompleteRide(Ride ride)
    {
        Console.WriteLine("\n--- Ride Details ---");
        Console.WriteLine($"Rider: {ride.Rider.Name}");
        Console.WriteLine($"Driver: {ride.Driver.Name}");
        Console.WriteLine($"From: {ride.StartLocation} To: {ride.EndLocation}");
        Console.WriteLine($"Distance: {ride.DistanceInKm} km");
        
        // POLYMORPHISM! The service just calls CalculateFare.
        // It doesn't need to know if it's Economy, Premium, or Pool.
        decimal fare = ride.CalculateFare();
        Console.WriteLine($"Ride Type: {ride.GetType().Name}");
        Console.WriteLine($"Final Fare: ${fare:F2}");
        Console.WriteLine("--------------------");
    }
}

public class Program
{
    public static void Main()
    {
        // Setup
        var rider1 = new Rider { Name = "Alice" };
        var driver1 = new Driver { Name = "Bob" };
        var service = new RideHailingService();
        
        // Create different types of rides
        var economyRide = new EconomyRide("Downtown", "Airport", rider1, 25.5);
        economyRide.AssignDriver(driver1);
        
        var premiumRide = new PremiumRide("Hotel", "Business Park", rider1, 15.2);
        premiumRide.AssignDriver(driver1);

        var poolRide = new RidePool("Mall", "University", rider1, 10.0);
        poolRide.AssignDriver(driver1);
        poolRide.NumberOfRiders = 2; // Two people are sharing this ride

        // Process all rides using the same method
        service.CompleteRide(economyRide);
        service.CompleteRide(premiumRide);
        service.CompleteRide(poolRide);
    }
}
</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Knowledge Check -->
                <section id="quiz" class="section-card">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-2">ðŸ§  Knowledge Check</h2>
                    <div id="quiz-container" class="space-y-6">
                        <!-- Question 1 -->
                        <div class="quiz-question" data-correct="1">
                            <p class="font-semibold mb-2">1. A class can inherit from ____ abstract class(es) and implement ____ interface(s).</p>
                            <div class="space-y-2">
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q1" value="0" class="mr-2">multiple, only one</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q1" value="1" class="mr-2">only one, multiple</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q1" value="2" class="mr-2">only one, only one</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q1" value="3" class="mr-2">multiple, multiple</label>
                            </div>
                            <p class="quiz-feedback text-sm mt-2 hidden"></p>
                        </div>
                        <!-- Question 2 -->
                         <div class="quiz-question" data-correct="3">
                            <p class="font-semibold mb-2">2. Which keyword is used in a base class to allow a method to be overridden?</p>
                            <div class="space-y-2">
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q2" value="0" class="mr-2">override</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q2" value="1" class="mr-2">sealed</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q2" value="2" class="mr-2">new</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q2" value="3" class="mr-2">virtual</label>
                            </div>
                            <p class="quiz-feedback text-sm mt-2 hidden"></p>
                        </div>
                        <!-- Question 3 -->
                        <div class="quiz-question" data-correct="0">
                            <p class="font-semibold mb-2">3. Treating a `Dog` object as an `Animal` object is an example of:</p>
                            <div class="space-y-2">
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q3" value="0" class="mr-2">Polymorphism</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q3" value="1" class="mr-2">Encapsulation</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q3" value="2" class="mr-2">Abstraction</label>
                                <label class="quiz-option block border border-gray-300 p-3 rounded-md cursor-pointer hover:bg-gray-50"><input type="radio" name="q3" value="3" class="mr-2">Composition</label>
                            </div>
                            <p class="quiz-feedback text-sm mt-2 hidden"></p>
                        </div>
                    </div>
                </section>
                
                <!-- Self-Assessment Challenge -->
                <section id="challenge" class="section-card">
                    <h2 class="text-3xl font-bold mb-6 border-b pb-2">ðŸš€ Self-Assessment Challenge</h2>
                    <p class="mb-4">Create a system to render different UI elements. Create an interface <code class="font-mono text-sm bg-gray-100 p-1 rounded">IRenderable</code> with a single method <code class="font-mono text-sm bg-gray-100 p-1 rounded">Render()</code>. Implement this interface on three classes: <code class="font-mono text-sm bg-gray-100 p-1 rounded">Button</code>, <code class="font-mono text-sm bg-gray-100 p-1 rounded">TextBox</code>, and <code class="font-mono text-sm bg-gray-100 p-1 rounded">Image</code>. Each class's Render method should print a description of how it would be drawn (e.g., "Drawing a button with text: 'Click Me'"). Create a list of <code class="font-mono text-sm bg-gray-100 p-1 rounded">IRenderable</code> elements and loop through them, calling Render() on each one to simulate drawing a UI.</p>
                    <div class="solution-toggle" onclick="toggleSolution('solution-challenge')">Reveal Solution</div>
                    <div id="solution-challenge" class="solution-content">
                        <div class="code-block">
                                <button class="copy-btn">Copy</button>
                                <pre><code class="language-csharp">using System;
using System.Collections.Generic;

// The contract for anything that can be rendered on the screen
public interface IRenderable
{
    void Render();
}

// Button implementation
public class Button : IRenderable
{
    public string Text { get; set; }
    public int X { get; set; }
    public int Y { get; set; }

    public Button(string text, int x, int y)
    {
        Text = text;
        X = x;
        Y = y;
    }

    public void Render()
    {
        Console.WriteLine($"Drawing a BUTTON at ({X}, {Y}) with text: '{Text}'");
    }
}

// TextBox implementation
public class TextBox : IRenderable
{
    public string Content { get; set; }
    public int Width { get; set; }
    public int Height { get; set; }

    public TextBox(string content, int width, int height)
    {
        Content = content;
        Width = width;
        Height = height;
    }

    public void Render()
    {
        Console.WriteLine($"Drawing a TEXTBOX [{Width}x{Height}] with content: '{Content}'");
    }
}

// Image implementation
public class Image : IRenderable
{
    public string ImageUrl { get; set; }

    public Image(string imageUrl)
    {
        ImageUrl = imageUrl;
    }

    public void Render()
    {
        Console.WriteLine($"Drawing an IMAGE from source: '{ImageUrl}'");
    }
}

// Main program to simulate the UI rendering engine
public class Program
{
    public static void Main()
    {
        // A list containing different types of UI elements, all treated as IRenderable
        var uiElements = new List&lt;IRenderable&gt;
        {
            new Button("Submit", 10, 20),
            new TextBox("Enter your name", 200, 30),
            new Image("/images/logo.png"),
            new Button("Cancel", 10, 50)
        };

        Console.WriteLine("--- Rendering UI ---");
        // The rendering engine doesn't care about the specific type, it just tells them to render
        foreach (var element in uiElements)
        {
            element.Render();
        }
        Console.WriteLine("--------------------");
    }
}
</code></pre>
                            </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer class="mt-16 py-8 bg-white border-t">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <div class="flex justify-center mb-4">
                <a href="roadmap.html" class="btn btn-primary">Return to Homepage</a>
            </div>
            <p class="text-gray-500">&copy; 2025 OOP Foundations. All Rights Reserved.</p>
            <p class="text-sm mt-1 text-gray-500">A self-contained learning module.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Copy-to-Clipboard ---
            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const code = btn.parentElement.querySelector('pre code').innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        btn.textContent = 'Copied!';
                        setTimeout(() => btn.textContent = 'Copy', 2000);
                    });
                });
            });

            // --- Active TOC Link ---
            const sections = document.querySelectorAll('main section');
            const tocLinks = document.querySelectorAll('.toc-link');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        tocLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === `#${entry.target.id}`) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-40% 0px -60% 0px' });
            sections.forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
