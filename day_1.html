<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OOP Foundations: Day 1 - Intro, Encapsulation & Abstraction - OOP Foundations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 from roadmap */
            color: #1e293b; /* slate-800 from roadmap */
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Inter', sans-serif;
            font-weight: 700;
        }
        pre {
            background-color: #1E1E1E;
            color: #D4D4D4;
            font-family: 'Roboto Mono', monospace;
            border-radius: 0.5rem;
            padding: 1.25rem;
            position: relative;
            overflow-x: auto;
            border: 1px solid #3a404a;
        }
        pre code {
            background-color: transparent !important;
            color: inherit;
            padding: 0;
            font-size: inherit;
            border-radius: 0;
        }
        .prose-custom :not(pre) > code {
            background-color: #F3F4F6;
            color: #C06A47;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9em;
        }
        .btn {
            display: inline-block;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            text-align: center;
        }
        .btn-header {
            background-color: #e2e8f0; /* slate-200 */
            color: #334155; /* slate-700 */
            border: 1px solid #cbd5e1; /* slate-300 */
        }
        .btn-header:hover {
            background-color: #cbd5e1; /* slate-300 */
        }
        .toc-link {
            transition: all 0.2s ease-in-out;
            border-left: 2px solid transparent;
        }
        .toc-link:hover {
            color: #0d9488; /* teal-600 */
            border-left-color: #0d9488;
        }
        .toc-link.active {
            color: #0f766e; /* teal-700 */
            border-left-color: #0f766e;
            font-weight: 600;
        }
        .prose-custom { max-width: 80ch; }
        .prose-custom h2 { margin-top: 2.5em; margin-bottom: 1em; border-bottom: 1px solid #e2e8f0; padding-bottom: 0.5rem; }
        .prose-custom h3 { margin-top: 2em; margin-bottom: 0.8em; }
        .prose-custom p, .prose-custom ul, .prose-custom ol { line-height: 1.7; }
    </style>
</head>
<body class="antialiased">

    <!-- Header -->
    <header class="bg-white shadow-md fixed top-0 left-0 right-0 z-50 border-b border-slate-200/80">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-3">
                <div class="text-2xl font-bold text-slate-800">
                    <a href="roadmap.html">Low-Level Design Bootcamp</a>
                </div>
                <a href="roadmap.html" class="btn btn-header whitespace-nowrap">Return to Roadmap</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 pt-24">
        <div class="text-center my-12">
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight text-slate-900">OOP Foundations: Day 1</h1>
            <p class="mt-4 text-xl text-slate-600 max-w-3xl mx-auto">An Introduction to Encapsulation & Abstraction in C#</p>
        </div>

        <div class="flex flex-col lg:flex-row-reverse lg:gap-x-12">
            <aside class="w-full lg:w-1/4 lg:sticky lg:top-24 self-start mb-12 lg:mb-0">
                <div class="p-4 rounded-lg bg-white shadow-sm border border-slate-200/80">
                    <h3 class="text-lg font-semibold mb-4">On This Page</h3>
                    <nav id="toc-nav" class="flex flex-col space-y-2">
                        <a href="#theory" class="toc-link pl-2 text-gray-600">Theory Deep Dive</a>
                        <a href="#practice" class="toc-link pl-2 text-gray-600">Coding Practice</a>
                        <a href="#problems" class="toc-link pl-2 text-gray-600">Problem Solving</a>
                        <a href="#uml" class="toc-link pl-2 text-gray-600">UML/Schema Design</a>
                        <a href="#case-study" class="toc-link pl-2 text-gray-600">Case Study</a>
                        <a href="#quiz" class="toc-link pl-2 text-gray-600">Knowledge Check</a>
                        <a href="#challenge" class="toc-link pl-2 text-gray-600">Self-Assessment</a>
                    </nav>
                </div>
            </aside>

            <div class="w-full lg:w-3/4 prose-custom">
                <section id="theory" class="scroll-mt-24 space-y-12">
                    <h2 class="text-3xl font-bold text-slate-900 border-b-2 border-slate-200 pb-3">Theory Deep Dive</h2>
                    
                    <article>
                        <h3 class="text-2xl font-semibold text-slate-800">1. Objects and Classes in C#</h3>
                        <p class="mt-3 text-slate-700 leading-relaxed text-base">
                            In Object-Oriented Programming, a <strong class="text-indigo-600 font-semibold">class</strong> is a blueprint or template for creating objects. It defines a set of properties (data) and methods (behaviors) that the objects of that class will have. An <strong class="text-indigo-600 font-semibold">object</strong> is an instance of a class. Think of a class as the architectural blueprint for a house, and an object as the actual house built from that blueprint. You can build many houses (objects) from a single blueprint (class).
                        </p>
                        <div class="mt-4 p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg">
                            <p class="text-indigo-800">In C#, we use the <code>class</code> keyword to define a class and the <code>new</code> keyword to create an object (an instance of the class).</p>
                        </div>
                        <h4 class="font-semibold mt-6 mb-2 text-slate-800">Syntax Snippet</h4>
                        <div class="code-block content-card">
                            <pre><code class="language-csharp">
// Defining a class
public class Car 
{
    // Properties (Fields)
    public string Color;
    public string Model;

    // Method (Behavior)
    public void StartEngine() 
    {
        Console.WriteLine("Engine started!");
    }
}

// Creating an object (instance)
Car myCar = new Car();
myCar.Color = "Red";
myCar.StartEngine(); // Output: Engine started!
                            </code></pre>
                            <button class="copy-btn">Copy</button>
                        </div>
                    </article>

                    <article>
                        <h3 class="text-2xl font-semibold text-slate-800">2. Access Modifiers</h3>
                        <p class="mt-3 text-slate-700 leading-relaxed text-base">
                            Access modifiers are keywords that set the visibility or accessibility level of classes, methods, and other members. They are a core part of encapsulation.
                        </p>
                        <ul class="mt-4 space-y-3 list-disc list-inside text-slate-700">
                            <li><strong class="text-slate-800 font-semibold">public:</strong> The code is accessible from any other code, without restrictions.</li>
                            <li><strong class="text-slate-800 font-semibold">private:</strong> The code is only accessible within the same class. This is the default if no modifier is specified for a member.</li>
                            <li><strong class="text-slate-800 font-semibold">protected:</strong> The code is accessible within the same class, or in a class that is inherited from that class.</li>
                            <li><strong class="text-slate-800 font-semibold">internal:</strong> The code is only accessible within its own assembly (e.g., a .dll or .exe file), but not from other assemblies.</li>
                        </ul>
                        <h4 class="font-semibold mt-6 mb-2 text-slate-800">Syntax Snippet</h4>
                        <div class="code-block content-card">
                            <pre><code class="language-csharp">
public class MyClass
{
    public int publicField = 1;
    private int privateField = 2;
    protected int protectedField = 3;
    internal int internalField = 4;

    public void AccessMembers()
    {
        // All are accessible within the class
        Console.WriteLine(publicField);
        Console.WriteLine(privateField);
        Console.WriteLine(protectedField);
        Console.WriteLine(internalField);
    }
}
                            </code></pre>
                             <button class="copy-btn">Copy</button>
                        </div>
                    </article>

                    <article>
                        <h3 class="text-2xl font-semibold text-slate-800">3. Encapsulation</h3>
                        <p class="mt-3 text-slate-700 leading-relaxed text-base">
                            Encapsulation is the bundling of data (properties) and the methods that operate on that data into a single unit (a class). Crucially, it involves restricting direct access to some of an object's components. This is typically achieved by making fields <strong class="font-semibold">private</strong> and providing <strong class="font-semibold">public</strong> methods (getters and setters) to access or modify their values.
                        </p>
                         <div class="mt-4 p-4 bg-amber-50 border-l-4 border-amber-400 rounded-r-lg">
                            <p class="text-amber-800"><strong class="font-semibold">Why it's important in backend systems:</strong> It protects an object's internal state from accidental or malicious modification. It allows you to add validation logic before changing a value, ensuring data integrity. It also reduces system complexity and increases reusability, as the internal implementation can change without affecting other parts of the system that use the object.
                            </p>
                        </div>
                        <h4 class="font-semibold mt-6 mb-2 text-slate-800">Real-world Analogy: Banking System</h4>
                        <p class="mt-3 text-slate-700 leading-relaxed text-base">
                            Think of a bank account. Your account balance is <code class="bg-slate-200 text-slate-800 p-1 rounded font-mono text-sm">private</code> data. You can't just walk into the bank and change the number in their database. Instead, you use public methods like <code class="bg-slate-200 text-slate-800 p-1 rounded font-mono text-sm">Deposit(amount)</code> or <code class="bg-slate-200 text-slate-800 p-1 rounded font-mono text-sm">Withdraw(amount)</code>. These methods contain logic to check if you have sufficient funds, log the transaction, etc., protecting the integrity of your balance.
                        </p>
                        <div class="code-block mt-4 content-card">
                            <pre><code class="language-csharp">
public class BankAccount
{
    private decimal balance; // The data is hidden (private)

    public BankAccount(decimal initialBalance)
    {
        if (initialBalance >= 0)
        {
            balance = initialBalance;
        }
    }

    // Public method to expose data safely
    public decimal GetBalance()
    {
        return balance;
    }

    // Public method to modify data safely
    public void Deposit(decimal amount)
    {
        if (amount > 0)
        {
            balance += amount;
        }
    }
}
                            </code></pre>
                            <button class="copy-btn">Copy</button>
                        </div>
                    </article>

                    <article>
                        <h3 class="text-2xl font-semibold text-slate-800">4. Abstraction</h3>
                        <p class="mt-3 text-slate-700 leading-relaxed text-base">
                            Abstraction means hiding the complex implementation details and showing only the essential features of the object. It's about simplifying a complex system by modeling classes appropriate to the problem. In C#, abstraction is achieved using <strong class="text-indigo-600 font-semibold">abstract classes</strong> and <strong class="text-indigo-600 font-semibold">interfaces</strong>.
                        </p>
                        <div class="mt-4 p-4 bg-amber-50 border-l-4 border-amber-400 rounded-r-lg">
                             <p class="text-amber-800"><strong class="font-semibold">Why it's important in backend systems:</strong> Abstraction helps manage complexity. Instead of worrying about how a database connection works internally, a developer can just use methods like <code class="bg-slate-200 text-slate-800 p-1 rounded font-mono text-sm">Connect()</code> and <code class="bg-slate-200 text-slate-800 p-1 rounded font-mono text-sm">ExecuteQuery()</code>. It also allows for flexibility. You can easily swap out one implementation for another (e.g., change from a SQL database to a NoSQL database) as long as the new implementation adheres to the same abstract interface, without changing the code that uses it.
                            </p>
                        </div>
                         <h4 class="font-semibold mt-6 mb-2 text-slate-800">Real-world Analogy: A Car</h4>
                        <p class="mt-3 text-slate-700 leading-relaxed text-base">
                            When you drive a car, you interact with a simple interface: a steering wheel, pedals, and a gear stick. You don't need to know the complex mechanics of the engine, transmission, or combustion process. The complexity is hidden (abstracted away), allowing you to focus on the essential task of driving.
                        </p>
                        <div class="code-block mt-4 content-card">
                            <pre><code class="language-csharp">
// Interface defines the "what" (the contract)
public interface IStorage
{
    void Save(string data);
    string Load();
}

// Class implements the "how" (the details)
public class FileStorage : IStorage
{
    private string filePath = "data.txt";

    public void Save(string data)
    {
        // Complex file I/O logic is hidden here
        File.WriteAllText(filePath, data);
    }

    public string Load()
    {
        // Complex file I/O logic is hidden here
        return File.ReadAllText(filePath);
    }
}
// Another class can use IStorage without knowing about FileStorage
                            </code></pre>
                             <button class="copy-btn">Copy</button>
                        </div>
                    </article>

                    <article>
                        <h3 class="text-2xl font-semibold text-slate-800">Encapsulation vs. Abstraction</h3>
                        <div class="overflow-x-auto mt-4 content-card">
                            <table class="w-full min-w-full divide-y divide-gray-200">
                                <thead class="bg-slate-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Feature</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Encapsulation</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider">Abstraction</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap font-medium text-slate-800">Main Goal</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">Data Hiding & protecting internal state.</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">Implementation Hiding & managing complexity.</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap font-medium text-slate-800">Focus</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">Focuses on the internal working of an object.</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">Focuses on the external view of an object.</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap font-medium text-slate-800">Implementation</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">Achieved using access modifiers (private, public).</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">Achieved using abstract classes and interfaces.</td>
                                    </tr>
                                    <tr>
                                        <td class="px-6 py-4 whitespace-nowrap font-medium text-slate-800">Concept Level</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">A strategy used at the implementation level.</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-slate-600">A concept used at the design level.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </article>
                </section>

                <section id="practice" class="scroll-mt-24 mt-16">
                    <h2 class="text-3xl font-bold text-slate-900 border-b-2 border-slate-200 pb-3">Coding Practice</h2>
                    <p class="mt-4 text-slate-700">Write a simple <code>Book</code> class with <code>Title</code>, <code>Author</code>, and a <strong>private</strong> <code>Price</code>. Add public methods <code>GetPrice()</code> to retrieve the price and <code>ApplyDiscount(decimal percentage)</code> to apply a discount, ensuring the price never drops below zero.</p>
                     <div class="code-block mt-4 content-card">
                        <pre><code class="language-csharp">
using System;

public class Book
{
    public string Title { get; set; }
    public string Author { get; set; }
    
    // Price is encapsulated: hidden from direct access
    private decimal price;

    public Book(string title, string author, decimal initialPrice)
    {
        Title = title;
        Author = author;
        // Ensure price is valid on creation
        price = (initialPrice > 0) ? initialPrice : 0;
    }

    // Public "getter" to safely expose the private price
    public decimal GetPrice()
    {
        return price;
    }

    // Public method to safely modify the private price
    public void ApplyDiscount(decimal discountPercentage)
    {
        if (discountPercentage > 0 && discountPercentage <= 100)
        {
            decimal discountAmount = price * (discountPercentage / 100);
            price -= discountAmount;

            // Ensure price doesn't fall below zero
            if (price < 0)
            {
                price = 0;
            }
        }
    }
}

// Example Usage:
public class Program
{
    public static void Main()
    {
        Book myBook = new Book("The Pragmatic Programmer", "Andy Hunt", 25.50m);
        Console.WriteLine($"Initial Price: ${myBook.GetPrice()}");

        // myBook.price = -10; // This will cause a compile error because 'price' is private

        myBook.ApplyDiscount(10); // Apply a 10% discount
        Console.WriteLine($"Price after 10% discount: ${myBook.GetPrice():F2}");

        myBook.ApplyDiscount(200); // Try to apply an invalid discount
        Console.WriteLine($"Price after invalid discount: ${myBook.GetPrice():F2}"); // Price remains unchanged
    }
}
                        </code></pre>
                        <button class="copy-btn">Copy</button>
                    </div>
                </section>

                <section id="problems" class="scroll-mt-24 mt-16 space-y-12">
                     <h2 class="text-3xl font-bold text-slate-900 border-b-2 border-slate-200 pb-3">Problem Solving</h2>
                     <article>
                         <h3 class="text-xl font-semibold text-slate-800">[Easy] Implement a Stack using arrays.</h3>
                         <p class="mt-2 text-slate-700">A stack is a Last-In, First-Out (LIFO) data structure. The main operations are Push (add item), Pop (remove item), and Peek (view top item).</p>
                         <div class="code-block mt-4 content-card">
                            <pre><code class="language-csharp">
public class ArrayStack
{
    private int[] items;
    private int top;

    public ArrayStack(int capacity)
    {
        items = new int[capacity];
        top = -1; // Stack is initially empty
    }

    public void Push(int item)
    {
        if (top == items.Length - 1)
        {
            throw new InvalidOperationException("Stack is full.");
        }
        items[++top] = item;
    }

    public int Pop()
    {
        if (top == -1)
        {
            throw new InvalidOperationException("Stack is empty.");
        }
        return items[top--];
    }

    public int Peek()
    {
        if (top == -1)
        {
            throw new InvalidOperationException("Stack is empty.");
        }
        return items[top];
    }
}
                            </code></pre>
                             <button class="copy-btn">Copy</button>
                         </div>
                     </article>
                      <article>
                         <h3 class="text-xl font-semibold text-slate-800">[Easy] Reverse a Linked List.</h3>
                         <p class="mt-2 text-slate-700">Given the head of a singly linked list, reverse the list, and return the new head.</p>
                         <div class="code-block mt-4 content-card">
                            <pre><code class="language-csharp">
public class ListNode {
    public int val;
    public ListNode next;
    public ListNode(int val=0, ListNode next=null) {
        this.val = val;
        this.next = next;
    }
}

public class Solution {
    public ListNode ReverseList(ListNode head) {
        ListNode prev = null;
        ListNode current = head;
        while (current != null) {
            ListNode nextTemp = current.next;
            current.next = prev;
            prev = current;
            current = nextTemp;
        }
        return prev; // `prev` is now the new head
    }
}
                            </code></pre>
                            <button class="copy-btn">Copy</button>
                         </div>
                     </article>
                      <article>
                         <h3 class="text-xl font-semibold text-slate-800">[Medium] Implement a Queue class with O(1) enqueue/dequeue.</h3>
                         <p class="mt-2 text-slate-700">A queue is a First-In, First-Out (FIFO) data structure. Using a doubly-linked list allows for O(1) time complexity for both adding (enqueue) and removing (dequeue) items.</p>
                         <div class="code-block mt-4 content-card">
                            <pre><code class="language-csharp">
public class QueueNode<T>
{
    public T Value { get; set; }
    public QueueNode<T> Next { get; set; }
    public QueueNode<T> Prev { get; set; }
    public QueueNode(T value) { Value = value; }
}

public class MyQueue<T>
{
    private QueueNode<T> head;
    private QueueNode<T> tail;
    public int Count { get; private set; }

    public void Enqueue(T value)
    {
        var newNode = new QueueNode<T>(value);
        if (tail == null)
        {
            head = tail = newNode;
        }
        else
        {
            tail.Next = newNode;
            newNode.Prev = tail;
            tail = newNode;
        }
        Count++;
    }

    public T Dequeue()
    {
        if (head == null)
        {
            throw new InvalidOperationException("Queue is empty.");
        }
        
        T value = head.Value;
        head = head.Next;

        if (head != null)
        {
            head.Prev = null;
        }
        else // Queue is now empty
        {
            tail = null;
        }
        
        Count--;
        return value;
    }
}
                            </code></pre>
                            <button class="copy-btn">Copy</button>
                         </div>
                     </article>
                </section>
                
                <section id="uml" class="scroll-mt-24 mt-16">
                    <h2 class="text-3xl font-bold text-slate-900 border-b-2 border-slate-200 pb-3">UML/Schema Design Task</h2>
                    <p class="mt-4 text-slate-700">Create a class diagram for a Library Management system with Book, Member, and Loan classes. The diagram should show an aggregation relationship, where a Member can have many Loans.</p>
                    <div class="mt-6 p-6 content-card">
                        <div class="flex flex-col items-center space-y-6 md:flex-row md:space-y-0 md:items-start md:justify-around">
                            <div class="uml-class w-52">
                                <div class="title">Book</div>
                                <div class="text-left text-sm space-y-1 text-slate-600">
                                    <p>- ISBN: string</p>
                                    <p>- Title: string</p>
                                    <p>- Author: string</p>
                                </div>
                            </div>

                            <div class="uml-class w-52">
                                <div class="title">Member</div>
                                <div class="text-left text-sm space-y-1 text-slate-600">
                                    <p>- MemberID: string</p>
                                    <p>- Name: string</p>
                                </div>
                            </div>
                            
                            <div class="uml-class w-52">
                                <div class="title">Loan</div>
                                <div class="text-left text-sm space-y-1 text-slate-600">
                                    <p>- LoanID: string</p>
                                    <p>- LoanDate: DateTime</p>
                                    <p>- DueDate: DateTime</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-10 flex justify-center items-center">
                            <div class="text-center">
                                <div class="font-semibold text-slate-700">Member</div>
                                <div class="uml-connector-v h-6"></div>
                                <div class="uml-connector w-72 md:w-96">
                                    <div class="uml-label">has many &lt;&gt; (Aggregation)</div>
                                </div>
                                <div class="uml-connector-v h-6"></div>
                                <div class="font-semibold text-slate-700">Loan</div>
                            </div>
                        </div>
                        <p class="mt-6 text-center text-sm text-slate-600">This diagram shows aggregation. A <strong>Member</strong> object "has a" collection of <strong>Loan</strong> objects, but the Loan objects can exist independently of the Member.</p>
                    </div>
                </section>

                <section id="case-study" class="scroll-mt-24 mt-16">
                    <h2 class="text-3xl font-bold text-slate-900 border-b-2 border-slate-200 pb-3">Case Study: URL Shortener</h2>
                    <p class="mt-4 text-slate-700">Build the first draft of a URL Shortener. The system should take a long URL as input and produce a short, unique code. A common approach is to use a database with an auto-incrementing ID. We then convert this integer ID into a Base62 string ([a-zA-Z0-9]) for a shorter, more URL-friendly code.</p>
                     <h3 class="text-xl font-semibold text-slate-800 mt-6">Sequence Diagram</h3>
                     <div class="mt-4 p-8 content-card">
                        <div class="grid grid-cols-3 gap-x-4 md:gap-x-8 text-center text-sm font-semibold">
                            <div class="seq-obj">👤<br>User</div>
                            <div class="seq-obj">💻<br>API Server</div>
                            <div class="seq-obj">🗄️<br>Database</div>
                        </div>
                        <div class="grid grid-cols-3 gap-x-4 md:gap-x-8 h-80 mt-4 relative">
                            <div class="relative"><div class="seq-line"></div></div>
                            <div class="relative"><div class="seq-line"></div></div>
                            <div class="relative"><div class="seq-line"></div></div>
                            
                            <div class="absolute w-full top-8" style="padding-left: 16.66%; padding-right: 16.66%;">
                                <div class="relative w-1/2">
                                    <div class="seq-arrow"></div>
                                    <div class="absolute -top-6 text-xs text-slate-600">1. POST /shorten (longUrl)</div>
                                </div>
                            </div>
                             <div class="absolute w-full top-24" style="padding-left: 50%; padding-right: 0;">
                                <div class="relative w-1/2">
                                    <div class="seq-arrow"></div>
                                    <div class="absolute -top-6 text-xs text-slate-600">2. INSERT longUrl, get ID</div>
                                </div>
                            </div>
                             <div class="absolute w-full top-40" style="padding-left: 50%; padding-right: 0;">
                                <div class="relative w-1/2" style="transform: scaleX(-1);">
                                    <div class="seq-arrow seq-arrow-return"></div>
                                    <div class="absolute -top-6 text-xs text-slate-600 w-full text-right" style="transform: scaleX(-1);">3. Return ID</div>
                                </div>
                            </div>
                            <div class="absolute w-full top-56 text-center" style="padding-left: 33.33%; padding-right: 33.33%;">
                                 <div class="relative">
                                    <div class="text-xs text-slate-600 bg-indigo-50 p-1 rounded-md border border-indigo-200">🔄 4. Encode ID to Base62</div>
                                 </div>
                            </div>
                             <div class="absolute w-full top-72" style="padding-left: 16.66%; padding-right: 16.66%;">
                                <div class="relative w-1/2" style="transform: scaleX(-1);">
                                    <div class="seq-arrow seq-arrow-return"></div>
                                    <div class="absolute -top-6 text-xs text-slate-600 w-full text-right" style="transform: scaleX(-1);">5. Return shortUrl</div>
                                </div>
                            </div>
                        </div>
                     </div>
                </section>

                <section id="quiz" class="scroll-mt-24 mt-16">
                    <h2 class="text-3xl font-bold text-slate-900 border-b-2 border-slate-200 pb-3">Knowledge Check Quiz</h2>
                    <div id="quiz-container" class="mt-6 space-y-8"></div>
                    <div id="quiz-results" class="mt-6 hidden p-4 rounded-lg bg-indigo-100 text-indigo-800 font-semibold text-lg"></div>
                </section>

                <section id="challenge" class="scroll-mt-24 mt-16">
                     <h2 class="text-3xl font-bold text-slate-900 border-b-2 border-slate-200 pb-3">Self-Assessment Challenge</h2>
                     <article class="mt-6 p-6 content-card">
                        <h3 class="text-xl font-semibold text-slate-800">Challenge: Design a Vending Machine</h3>
                        <p class="mt-2 text-slate-700">
                           Design the classes for a simple vending machine. It should have a collection of items, each with a name, price, and quantity. The machine should accept money, dispense an item if enough money is inserted and the item is in stock, and provide change.
                        </p>
                        <p class="mt-2 text-slate-700">
                           Focus on encapsulation. What data should be private? What methods should be public? Think about classes like <code>VendingMachine</code>, <code>Item</code>.
                        </p>
                        <div class="mt-6">
                            <button id="solution-toggle" class="solution-toggle inline-flex items-center font-semibold text-indigo-600 hover:text-indigo-800 group">
                                <span class="mr-2">Reveal Detailed Solution</span>
                                <svg id="solution-arrow" class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                            </button>
                            <div id="solution-content" class="hidden mt-4 border-t border-slate-200 pt-4">
                                <div class="code-block">
                                    <pre><code class="language-csharp">
using System;
using System.Collections.Generic;
using System.Linq;

// Represents a single item slot in the machine
public class Item
{
    public string Name { get; private set; }
    public decimal Price { get; private set; }
    public int Quantity { get; set; } // Settable only within the assembly

    public Item(string name, decimal price, int quantity)
    {
        Name = name;
        Price = price;
        Quantity = quantity;
    }
}

public class VendingMachine
{
    // --- Encapsulated Data ---
    private List<Item> inventory;
    private decimal currentBalance;

    public VendingMachine()
    {
        inventory = new List<Item>();
        currentBalance = 0;
    }
    
    // --- Public Interface ---

    public void StockItem(Item item) {
        inventory.Add(item);
    }

    public void InsertMoney(decimal amount)
    {
        if (amount > 0)
        {
            currentBalance += amount;
            Console.WriteLine($"Current balance: ${currentBalance:F2}");
        }
    }

    public string DispenseItem(string itemName)
    {
        Item item = inventory.FirstOrDefault(i => i.Name.Equals(itemName, StringComparison.OrdinalIgnoreCase));

        if (item == null)
        {
            return "Item not found.";
        }
        if (item.Quantity == 0)
        {
            return $"{item.Name} is out of stock.";
        }
        if (currentBalance < item.Price)
        {
            return $"Insufficient funds. Please insert at least ${item.Price - currentBalance:F2} more.";
        }

        currentBalance -= item.Price;
        item.Quantity--;

        string result = $"Dispensing {item.Name}.";
        if (currentBalance > 0)
        {
            result += $" Your change is ${ReturnChange():F2}.";
        }
        return result;
    }

    public decimal GetCurrentBalance()
    {
        return currentBalance;
    }

    // --- Private Helper Method ---

    private decimal ReturnChange()
    {
        decimal change = currentBalance;
        currentBalance = 0;
        return change;
    }
}
                                    </code></pre>
                                    <button class="copy-btn">Copy</button>
                                </div>
                            </div>
                        </div>
                     </article>
                </section>
            </main>
        </div>
    </div>

    <footer class="bg-slate-800 text-slate-400 mt-24">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center">
            <p>&copy; 2025 OOP Learning Module. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        hljs.highlightAll();

        const tocLinks = document.querySelectorAll('.toc-link');
        const sections = document.querySelectorAll('main section');

        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.3
        };

        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    tocLinks.forEach(link => {
                        link.classList.remove('active');
                        if(link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            observer.observe(section);
        });

        const copyButtons = document.querySelectorAll('.copy-btn');
        copyButtons.forEach(button => {
            button.addEventListener('click', () => {
                const code = button.previousElementSibling.textContent;
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = code;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                try {
                    document.execCommand('copy');
                    button.textContent = 'Copied!';
                } catch (err) {
                    button.textContent = 'Error';
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(tempTextArea);
                setTimeout(() => {
                    button.textContent = 'Copy';
                }, 2000);
            });
        });

        const solutionToggle = document.getElementById('solution-toggle');
        const solutionContent = document.getElementById('solution-content');
        const solutionArrow = document.getElementById('solution-arrow');
        solutionToggle.addEventListener('click', () => {
            const isHidden = solutionContent.classList.contains('hidden');
            solutionContent.classList.toggle('hidden');
            solutionArrow.style.transform = isHidden ? 'rotate(90deg)' : 'rotate(0deg)';
        });

        const quizData = [
            {
                question: "Which principle is primarily concerned with hiding data and restricting access?",
                options: ["Abstraction", "Inheritance", "Encapsulation", "Polymorphism"],
                answer: "Encapsulation"
            },
            {
                question: "What is the default access modifier for a class member in C# if none is specified?",
                options: ["public", "internal", "protected", "private"],
                answer: "private"
            },
            {
                question: "An `interface` in C# is a pure form of which OOP concept?",
                options: ["Polymorphism", "Abstraction", "Encapsulation", "Inheritance"],
                answer: "Abstraction"
            },
            {
                question: "If a class `Dog` inherits from a class `Animal`, which access modifier allows members of `Animal` to be accessed in `Dog` but not from outside?",
                options: ["private", "public", "internal", "protected"],
                answer: "protected"
            }
        ];

        const quizContainer = document.getElementById('quiz-container');
        const quizResults = document.getElementById('quiz-results');
        let score = 0;
        let questionsAnswered = 0;

        quizData.forEach((q, index) => {
            const questionElement = document.createElement('article');
            questionElement.innerHTML = `
                <h3 class="font-semibold text-slate-800 text-base">${index + 1}. ${q.question}</h3>
                <div class="mt-4 space-y-3">
                    ${q.options.map(opt => `<div class="quiz-option border-2 border-slate-200 rounded-md p-3 hover:bg-slate-50">${opt}</div>`).join('')}
                </div>
                <div class="quiz-feedback mt-3 text-sm font-medium hidden p-3 rounded-md"></div>
            `;
            quizContainer.appendChild(questionElement);

            const options = questionElement.querySelectorAll('.quiz-option');
            const feedback = questionElement.querySelector('.quiz-feedback');

            options.forEach(option => {
                option.addEventListener('click', () => {
                    if (questionElement.classList.contains('answered')) return;
                    questionElement.classList.add('answered');
                    questionsAnswered++;

                    const selectedAnswer = option.textContent;
                    const correctAnswer = q.answer;

                    if (selectedAnswer === correctAnswer) {
                        option.classList.add('correct');
                        feedback.textContent = '✅ Correct!';
                        feedback.classList.add('bg-green-50', 'text-green-700');
                        score++;
                    } else {
                        option.classList.add('incorrect');
                        feedback.textContent = `❌ Incorrect. The correct answer is "${correctAnswer}".`;
                        feedback.classList.add('bg-red-50', 'text-red-700');
                    }

                    options.forEach(opt => {
                        if (opt.textContent === correctAnswer) {
                           opt.classList.add('reveal');
                        }
                    });

                    feedback.classList.remove('hidden');

                    if(questionsAnswered === quizData.length) {
                        quizResults.textContent = `Quiz Complete! You scored ${score} out of ${quizData.length}.`;
                        quizResults.classList.remove('hidden');
                    }
                });
            });
        });
    });
    </script>
</body>
</html>
